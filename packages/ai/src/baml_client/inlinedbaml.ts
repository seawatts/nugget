/*************************************************************************************************

Welcome to Baml! To use this generated code, please run one of the following:

$ npm install @boundaryml/baml
$ yarn add @boundaryml/baml
$ pnpm add @boundaryml/baml

*************************************************************************************************/

// This file was generated by BAML: please do not edit it. Instead, edit the
// BAML files and re-generate this code using: baml-cli generate
// You can install baml-cli with:
//  $ npm install @boundaryml/baml
//
/* eslint-disable */
// tslint:disable
// @ts-nocheck
// biome-ignore format: autogenerated code

const fileMap = {
  
  "baby-development/baby-visit-explainer.baml": "// BAML function for pediatric visit explanations\n// Provides AI-powered explanations of routine well-baby visits\n\n// ============================================================================\n// Classes\n// ============================================================================\n\nclass BabyVisitExplainerOutput {\n  text string @description(\"Explanation of what happens at this pediatric visit, including vaccinations if applicable (3-4 sentences).\")\n}\n\n// ============================================================================\n// Functions\n// ============================================================================\n\nfunction BabyVisitExplainer(\n  ageWeeks: int\n) -> BabyVisitExplainerOutput {\n  client CustomGPT4oMini\n  prompt #\"\n    {{_.role(\"system\")}}\n    You are a pediatric care expert explaining routine well-baby visits to parents.\n\n    {{_.role(\"user\")}}\n    Explain what happens at the {{ageWeeks}}-week pediatric visit.\n\n    Include:\n    - What the doctor will check\n    - Any vaccinations due at this age\n    - What parents should prepare or ask about\n\n    Be informative and reassuring (3-4 sentences).\n\n    {{ ctx.output_format }}\n  \"#\n}\n\n// ============================================================================\n// Tests\n// ============================================================================\n\ntest baby_visit_2_week {\n  functions [BabyVisitExplainer]\n  args {\n    ageWeeks 2\n  }\n}\n\ntest baby_visit_8_week {\n  functions [BabyVisitExplainer]\n  args {\n    ageWeeks 8\n  }\n}\n\n",
  "baby-development/contextual-milestones.baml": "// BAML function for generating contextual milestone suggestions\n// Provides AI-powered milestone suggestions based on baby's current data and activities\n\n// ============================================================================\n// Classes\n// ============================================================================\n\nclass MilestoneSuggestion {\n  title string @description(\"Concise milestone title (max 6 words)\")\n  type string @description(\"Milestone type: 'physical', 'cognitive', 'social', 'language', or 'self_care'\")\n  description string @description(\"Brief description (max 12 words)\")\n  ageLabel string @description(\"Age context label (e.g., 'Week 2', 'Day 5')\")\n  relevance string @description(\"Why relevant now (max 15 words)\")\n}\n\nclass ContextualMilestonesOutput {\n  milestones MilestoneSuggestion[] @description(\"2-3 contextually relevant milestone suggestions based on baby's current stage and activities\")\n}\n\n// ============================================================================\n// Functions\n// ============================================================================\n\nfunction GenerateContextualMilestones(\n  babyName: string,\n  ageInDays: int,\n  ageInWeeks: int,\n  currentWeightOz: int?,\n  birthWeightOz: int?,\n  height: int?,\n  feedingCount24h: int?,\n  avgFeedingInterval: float?,\n  sleepCount24h: int?,\n  totalSleepHours24h: float?,\n  diaperCount24h: int?,\n  avgFeedingsPerDay: float?,\n  avgSleepHoursPerDay: float?,\n  avgDiaperChangesPerDay: float?,\n  recentDiaperColors: string?,\n  hasTummyTimeActivity: bool?\n) -> ContextualMilestonesOutput {\n  client CustomGPT4oMini\n  prompt #\"\n    {{_.role(\"system\")}}\n    You are a pediatric development expert suggesting relevant milestones for parents to watch for based on their baby's current age and recent activities.\n\n    {{_.role(\"user\")}}\n    Generate 2-3 contextually relevant milestone suggestions for {{babyName}}.\n\n    Baby Context:\n    - Age: {{ageInDays}} days ({{ageInWeeks}} weeks)\n    {% if currentWeightOz and birthWeightOz %}- Weight: {{currentWeightOz}}oz (birth: {{birthWeightOz}}oz, change: {{currentWeightOz - birthWeightOz}}oz){% endif %}\n    {% if height %}- Height: {{height}}cm{% endif %}\n\n    {% if feedingCount24h or sleepCount24h or diaperCount24h %}\n    Recent Activity (24h):\n    {% if feedingCount24h %}- Feedings: {{feedingCount24h}}{% if avgFeedingInterval %} (avg {{avgFeedingInterval}}h intervals){% endif %}{% endif %}\n    {% if sleepCount24h %}- Sleep: {{sleepCount24h}} sessions{% if totalSleepHours24h %} ({{totalSleepHours24h}}h total){% endif %}{% endif %}\n    {% if diaperCount24h %}- Diapers: {{diaperCount24h}} changes{% endif %}\n    {% if recentDiaperColors %}- Recent diaper colors: {{recentDiaperColors}}{% endif %}\n    {% endif %}\n\n    {% if avgFeedingsPerDay or avgSleepHoursPerDay or avgDiaperChangesPerDay %}\n    Weekly Patterns:\n    {% if avgFeedingsPerDay %}- Avg feedings/day: {{avgFeedingsPerDay}}{% endif %}\n    {% if avgSleepHoursPerDay %}- Avg sleep/day: {{avgSleepHoursPerDay}}h{% endif %}\n    {% if avgDiaperChangesPerDay %}- Avg diapers/day: {{avgDiaperChangesPerDay}}{% endif %}\n    {% endif %}\n\n    {% if hasTummyTimeActivity %}\n    - Parents have been doing tummy time activities\n    {% endif %}\n\n    Based on {{babyName}}'s age and recent activities, suggest 2-3 milestones that are:\n    1. Age-appropriate (within the typical range for {{ageInWeeks}} weeks)\n    2. Contextually relevant (related to their recent activities or data patterns)\n    3. Varied in type (mix of physical, cognitive, social, language, self_care)\n    4. Observable by parents in daily care\n\n    For each milestone suggestion:\n    - **title**: Clear, concise title (max 6 words)\n    - **type**: One of: 'physical', 'cognitive', 'social', 'language', 'self_care'\n    - **description**: Brief description of what to watch for (max 12 words)\n    - **ageLabel**: Context like \"Week {{ageInWeeks}}\" or \"Day {{ageInDays}}\"\n    - **relevance**: Why relevant NOW based on data (max 15 words)\n\n    Examples of contextual reasoning:\n    - If diaper colors changed recently → suggest \"First Yellow Stool\" milestone\n    - If baby is 2+ weeks → suggest \"First Social Smile\"\n    - If tummy time activities present → suggest \"Lifts Head During Tummy Time\"\n    - If sleep patterns are consolidating → suggest \"Longer Sleep Stretches\"\n    - If feeding intervals increasing → suggest \"Eating More Efficiently\"\n\n    {{ ctx.output_format }}\n  \"#\n}\n\n// ============================================================================\n// Tests\n// ============================================================================\n\ntest contextual_milestones_week_1 {\n  functions [GenerateContextualMilestones]\n  args {\n    babyName \"Riley\"\n    ageInDays 7\n    ageInWeeks 1\n    currentWeightOz 118\n    birthWeightOz 115\n    height 52\n    feedingCount24h 10\n    avgFeedingInterval 2.4\n    sleepCount24h 8\n    totalSleepHours24h 16.0\n    diaperCount24h 8\n    avgFeedingsPerDay 10.0\n    avgSleepHoursPerDay 16.0\n    avgDiaperChangesPerDay 8.0\n    recentDiaperColors \"black, yellow\"\n    hasTummyTimeActivity false\n  }\n}\n\ntest contextual_milestones_week_4 {\n  functions [GenerateContextualMilestones]\n  args {\n    babyName \"Alex\"\n    ageInDays 28\n    ageInWeeks 4\n    currentWeightOz 135\n    birthWeightOz 120\n    height 55\n    feedingCount24h 8\n    avgFeedingInterval 3.0\n    sleepCount24h 6\n    totalSleepHours24h 14.5\n    diaperCount24h 7\n    avgFeedingsPerDay 8.5\n    avgSleepHoursPerDay 15.0\n    avgDiaperChangesPerDay 7.5\n    recentDiaperColors \"yellow, brown\"\n    hasTummyTimeActivity true\n  }\n}\n\ntest contextual_milestones_week_8 {\n  functions [GenerateContextualMilestones]\n  args {\n    babyName \"Jordan\"\n    ageInDays 56\n    ageInWeeks 8\n    currentWeightOz 165\n    birthWeightOz 120\n    height 58\n    feedingCount24h 7\n    avgFeedingInterval 3.4\n    sleepCount24h 5\n    totalSleepHours24h 13.0\n    diaperCount24h 6\n    avgFeedingsPerDay 7.0\n    avgSleepHoursPerDay 14.0\n    avgDiaperChangesPerDay 6.5\n    recentDiaperColors \"yellow, green\"\n    hasTummyTimeActivity true\n  }\n}\n\n",
  "baby-development/milestone-enhancement.baml": "// BAML function for enhancing milestone cards with rich content\n// Generates bullet points and follow-up questions for milestone program cards\n\n// ============================================================================\n// Classes\n// ============================================================================\n\nclass MilestoneEnhancementOutput {\n  subtitle string @description(\"A catchy subtitle (max 5 words)\")\n  summary string @description(\"One sentence summary (max 20 words)\")\n  bulletPoints string[] @description(\"2-3 developmental tips (each max 12 words)\")\n  followUpQuestion string @description(\"ONE focused question (max 15 words)\")\n\n  // Yes/No Question Support\n  isYesNoQuestion bool? @description(\"If true, this is a yes/no question (not open-ended). If false or omitted, it's an open-ended question.\")\n  openChatOnYes bool? @description(\"Whether to open chat dialog when user clicks 'Yes'. Only relevant if isYesNoQuestion is true.\")\n  openChatOnNo bool? @description(\"Whether to open chat dialog when user clicks 'No'. Only relevant if isYesNoQuestion is true.\")\n}\n\n// ============================================================================\n// Functions\n// ============================================================================\n\nfunction EnhanceMilestone(\n  milestoneTitle: string,\n  milestoneDescription: string,\n  milestoneType: string,\n  ageLabel: string,\n  babyName: string?,\n  babySex: string?,\n  ageInDays: int?,\n  // Rich context from database\n  recentChatTopics: string?,\n  achievedMilestones: string?,\n  activitySummary: string?,\n  parentWellness: string?,\n  medicalContext: string?\n) -> MilestoneEnhancementOutput {\n  client CustomGPT4oMini\n  prompt #\"\n    {{_.role(\"system\")}}\n    You are a pediatric development expert providing warm, educational content about baby milestones to parents,\n    grounded in evidence-based research from AAP, CDC, and peer-reviewed developmental psychology.\n\n    For each milestone enhancement:\n    - Explain the developmental neuroscience in accessible terms (e.g., \"neural pathways\", \"motor cortex\", \"sensory integration\")\n    - Reference research on why this milestone matters for future development\n    - Note the typical age range for this milestone (not just a single age)\n    - Connect to future developmental stages this milestone prepares for\n    - Distinguish evidence-based guidance from cultural practices where relevant\n    - Use phrases like \"Research shows...\", \"Developmental studies indicate...\", \"AAP guidelines suggest...\"\n\n    IMPORTANT CONTEXT - About the Nugget App:\n    The parents are using Nugget, a comprehensive parenting app that already provides:\n\n    TRACKING CAPABILITIES (already built-in):\n    - Milestone tracking with photo/video documentation\n    - Feeding, sleep, diaper, and activity logs with patterns\n    - Growth measurements (weight, height, head circumference) with WHO charts\n    - Developmental activity tracking (tummy time, bath, play)\n\n    ANALYSIS & INSIGHTS (already available):\n    - Visual growth charts comparing to WHO standards\n    - Pattern recognition across feeding/sleep/development\n    - Weekly and monthly progress summaries\n    - Milestone celebration with shareable cards\n\n    LEARNING & SUPPORT (already included):\n    - AI Chat assistant for developmental questions\n    - Learning Hub with age-appropriate activities\n    - Milestone guides for each developmental stage\n    - Memory Journal for capturing special moments\n\n    Your role is to:\n    ✓ Help parents UNDERSTAND what developmental changes to expect\n    ✓ EDUCATE about why milestones matter and how they connect\n    ✓ EXPLAIN what they're observing in their daily tracking\n    ✓ Build CONFIDENCE in recognizing developmental progress\n\n    Do NOT suggest the app features that already exist\n    DO focus on helping parents interpret behaviors, understand developmental stages, and celebrate progress\n\n    {{_.role(\"user\")}}\n    Enhance this milestone with rich content:\n\n    Milestone: {{milestoneTitle}}\n    Description: {{milestoneDescription}}\n    Type: {{milestoneType}}\n    Age: {{ageLabel}}\n    {% if babyName %}Baby's name: {{babyName}}{% endif %}\n    {% if babySex %}Sex: {{babySex}}\n    CRITICAL: Use grammatically correct pronouns throughout ALL generated content:\n    {% if babySex == \"M\" or babySex == \"male\" %}\n    - Use: he, him, his (e.g., \"Watch how he develops\", \"His progress\", \"Encourage him\")\n    {% elif babySex == \"F\" or babySex == \"female\" %}\n    - Use: she, her, hers (e.g., \"Watch how she develops\", \"Her progress\", \"Encourage her\")\n    {% else %}\n    - Use: they, them, their (e.g., \"Watch how they develop\", \"Their progress\", \"Encourage them\")\n    {% endif %}\n    {% else %}\n    - Use gender-neutral: they, them, their when sex is unknown\n    {% endif %}\n    {% if ageInDays %}Age in days: {{ageInDays}}{% endif %}\n\n    {% if recentChatTopics %}\n    ═══════════════════════════════════════════════════════════════\n    RECENT DISCUSSION CONTEXT\n    ═══════════════════════════════════════════════════════════════\n    {{recentChatTopics}}\n    {% endif %}\n\n    {% if achievedMilestones %}\n    ═══════════════════════════════════════════════════════════════\n    RECENTLY ACHIEVED MILESTONES\n    ═══════════════════════════════════════════════════════════════\n    {{achievedMilestones}}\n    {% endif %}\n\n    {% if activitySummary %}\n    ═══════════════════════════════════════════════════════════════\n    DETAILED ACTIVITY SUMMARY (LAST 3 DAYS)\n    ═══════════════════════════════════════════════════════════════\n    {{activitySummary}}\n    {% endif %}\n\n    {% if parentWellness %}\n    ═══════════════════════════════════════════════════════════════\n    PARENT WELLNESS CONTEXT\n    ═══════════════════════════════════════════════════════════════\n    {{parentWellness}}\n    {% endif %}\n\n    {% if medicalContext %}\n    ═══════════════════════════════════════════════════════════════\n    MEDICAL CONTEXT\n    ═══════════════════════════════════════════════════════════════\n    {{medicalContext}}\n    {% endif %}\n\n    Provide:\n\n    1. **subtitle**: A catchy subtitle (max 5 words)\n       - Captures the essence of the milestone\n       - Engaging and memorable for parents\n\n    2. **summary**: One sentence (max 20 words)\n       {% if babyName %}Use {{babyName}}'s name{% endif %}\n\n    3. **bulletPoints**: 2-3 actionable bullet points (each max 12 words):\n       - What parents might observe\n       - Why this milestone matters\n       - One practical suggestion\n\n    4. **followUpQuestion**: ONE focused question (max 15 words)\n       * Ask ONE question only - NO compound questions\n       * Use {% if babyName %}{{babyName}}'s{% else %}baby's{% endif %} name\n\n    CRITICAL YES/NO QUESTION REQUIREMENTS:\n\n    * DEFAULT RULE: For milestones, PREFER isYesNoQuestion: true (binary achievement questions)\n\n    * YES/NO QUESTIONS (isYesNoQuestion: true) - PREFERRED for milestones:\n      Examples:\n      - \"Is {% if babyName %}{{babyName}}{% else %}baby{% endif %} showing this behavior?\"\n      - \"Has {% if babyName %}{{babyName}}{% else %}baby{% endif %} achieved this milestone?\"\n      - \"Does {% if babyName %}{{babyName}}{% else %}baby{% endif %} do this during activities?\"\n\n    * When isYesNoQuestion: true, you MUST set openChatOnYes or openChatOnNo:\n      - openChatOnYes: true → For celebration/discussion (milestone achieved)\n      - openChatOnNo: true → For guidance (milestone not yet seen)\n\n    * OPEN-ENDED QUESTIONS (isYesNoQuestion: false) - Use ONLY for qualitative details:\n      - \"What behaviors have you noticed?\"\n      - \"How does {% if babyName %}{{babyName}}{% else %}baby{% endif %} respond?\"\n\n    Keep the tone:\n    - Warm and supportive\n    - Educational but not overwhelming\n    - Evidence-based but accessible\n    - Non-judgmental and reassuring\n    - Emphasize that development has a range, not a rigid timeline\n\n    {{ ctx.output_format }}\n  \"#\n}\n\n// ============================================================================\n// Tests\n// ============================================================================\n\ntest enhance_first_smile {\n  functions [EnhanceMilestone]\n  args {\n    milestoneTitle \"More Alert and Responsive\"\n    milestoneDescription \"Baby becomes more alert and responsive to sounds and faces.\"\n    milestoneType \"cognitive\"\n    ageLabel \"Week 1\"\n    babyName \"Riley\"\n    ageInDays 7\n  }\n}\n\ntest enhance_head_control {\n  functions [EnhanceMilestone]\n  args {\n    milestoneTitle \"Holds Head Up During Tummy Time\"\n    milestoneDescription \"Baby can lift and hold their head up for a few seconds during tummy time.\"\n    milestoneType \"physical\"\n    ageLabel \"Week 6\"\n    babyName \"Alex\"\n    ageInDays 42\n  }\n}\n\ntest enhance_social_smile {\n  functions [EnhanceMilestone]\n  args {\n    milestoneTitle \"First Social Smile\"\n    milestoneDescription \"Baby begins smiling in response to faces and voices.\"\n    milestoneType \"social\"\n    ageLabel \"Week 8\"\n    babyName null\n    ageInDays null\n  }\n}\n\n",
  "baby-development/milestone-explanation.baml": "// BAML function for milestone explanations\n// Provides AI-powered explanations when parents click on a milestone\n\n// ============================================================================\n// Classes\n// ============================================================================\n\nclass MilestoneExplanationOutput {\n  explanation string @description(\"A warm explanation of what this milestone means (2 sentences, max 40 words)\")\n  whyItMatters string @description(\"Why this milestone is important (1 sentence, max 25 words)\")\n  whatToExpect string @description(\"What parents might observe or what happens next (1 sentence, max 25 words)\")\n  tips string[] @description(\"2-3 practical tips (each max 12 words)\")\n  reassurance string @description(\"A reassuring message (1 sentence, max 20 words)\")\n}\n\n// ============================================================================\n// Functions\n// ============================================================================\n\nfunction MilestoneExplanation(\n  milestoneTitle: string,\n  milestoneType: string,\n  babyName: string,\n  ageInDays: int,\n  ageInWeeks: int,\n  currentWeightOz: int?,\n  birthWeightOz: int?,\n  feedingCount24h: int?,\n  sleepCount24h: int?,\n  diaperCount24h: int?\n) -> MilestoneExplanationOutput {\n  client CustomGPT4oMini\n  prompt #\"\n    {{_.role(\"system\")}}\n    You are a pediatric development expert providing warm, educational explanations about baby milestones to parents.\n\n    {{_.role(\"user\")}}\n    A parent is asking about this milestone: \"{{milestoneTitle}}\"\n    Milestone type: {{milestoneType}}\n\n    Baby: {{babyName}}\n    Age: {{ageInDays}} days ({{ageInWeeks}} weeks)\n\n    {% if currentWeightOz and birthWeightOz %}\n    Weight context: {{currentWeightOz}}oz (birth: {{birthWeightOz}}oz)\n    {% endif %}\n\n    {% if feedingCount24h or sleepCount24h or diaperCount24h %}\n    Recent activity (24h):\n    {% if feedingCount24h %}- Feedings: {{feedingCount24h}}{% endif %}\n    {% if sleepCount24h %}- Sleep sessions: {{sleepCount24h}}{% endif %}\n    {% if diaperCount24h %}- Diaper changes: {{diaperCount24h}}{% endif %}\n    {% endif %}\n\n    Provide a concise but accessible explanation that includes:\n\n    1. **explanation**: What this milestone is in simple terms. Use {{babyName}}'s name naturally (2 sentences, max 40 words).\n\n    2. **whyItMatters**: Why this milestone matters for {{babyName}}'s growth (1 sentence, max 25 words).\n\n    3. **whatToExpect**: What parents might observe now or what comes next (1 sentence, max 25 words).\n\n    4. **tips**: 2-3 practical tips (each max 12 words).\n\n    5. **reassurance**: A brief, reassuring message (1 sentence, max 20 words).\n\n    Keep the tone:\n    - Warm and supportive\n    - Educational but not overwhelming\n    - Specific to {{babyName}}'s age and context\n    - Evidence-based but accessible\n    - Non-judgmental and reassuring\n\n    {{ ctx.output_format }}\n  \"#\n}\n\n// ============================================================================\n// Tests\n// ============================================================================\n\ntest explain_first_meconium {\n  functions [MilestoneExplanation]\n  args {\n    milestoneTitle \"First Meconium Diaper\"\n    milestoneType \"physical\"\n    babyName \"Riley\"\n    ageInDays 1\n    ageInWeeks 0\n    currentWeightOz 115\n    birthWeightOz 115\n    feedingCount24h 8\n    sleepCount24h 10\n    diaperCount24h 3\n  }\n}\n\ntest explain_first_smile {\n  functions [MilestoneExplanation]\n  args {\n    milestoneTitle \"First Social Smile\"\n    milestoneType \"social\"\n    babyName \"Riley\"\n    ageInDays 14\n    ageInWeeks 2\n    currentWeightOz 125\n    birthWeightOz 115\n    feedingCount24h 9\n    sleepCount24h 7\n    diaperCount24h 8\n  }\n}\n\ntest explain_tummy_time {\n  functions [MilestoneExplanation]\n  args {\n    milestoneTitle \"Holds Head Up During Tummy Time\"\n    milestoneType \"physical\"\n    babyName \"Alex\"\n    ageInDays 42\n    ageInWeeks 6\n    currentWeightOz 145\n    birthWeightOz 120\n    feedingCount24h 8\n    sleepCount24h 6\n    diaperCount24h 7\n  }\n}\n\n",
  "baby-development/newborn-week-milestone.baml": "// BAML function for newborn developmental milestones\n// Provides AI-powered milestone information for newborn weeks\n\n// ============================================================================\n// Classes\n// ============================================================================\n\nclass NewbornMilestoneOutput {\n  tips LearningTip[] @description(\"Array of 3-5 developmental milestone tips and observations for this week, personalized to the baby's context\")\n}\n\n// ============================================================================\n// Functions\n// ============================================================================\n\nfunction NewbornWeekMilestone(\n  babyName: string,\n  week: int,\n  babySex: string?,\n  firstPregnancy: bool,\n  ageInDays: int,\n  currentWeightOz: int?,\n  birthWeightOz: int?,\n  height: int?,\n  headCircumference: int?,\n  feedingCount24h: int?,\n  sleepCount24h: int?,\n  // Rich context from database\n  recentChatTopics: string?,\n  achievedMilestones: string?,\n  activitySummary: string?,\n  parentWellness: string?,\n  medicalContext: string?\n) -> NewbornMilestoneOutput {\n  client CustomGPT4oMini\n  prompt #\"\n    {{_.role(\"system\")}}\n    You are a pediatric development expert providing age-appropriate milestone information based on:\n    - AAP Bright Futures developmental surveillance guidelines\n    - CDC \"Learn the Signs. Act Early\" milestones\n    - WHO Multicentre Growth Reference Study\n    - Current peer-reviewed pediatric research on infant development\n\n    Ground all milestone information in these evidence-based sources.\n    When discussing milestones, explain the developmental significance and reference typical ranges (not single ages).\n\n    IMPORTANT CONTEXT - About the Nugget App:\n    The parents are using Nugget, a comprehensive parenting app that already provides:\n\n    TRACKING CAPABILITIES (already built-in):\n    - Milestone tracking with photo/video documentation\n    - Feeding, sleep, diaper, and activity logs with patterns\n    - Growth measurements (weight, height, head circumference) with WHO charts\n    - Developmental activity tracking (tummy time, bath, play)\n\n    ANALYSIS & INSIGHTS (already available):\n    - Visual growth charts comparing to WHO standards\n    - Pattern recognition across feeding/sleep/development\n    - Weekly and monthly progress summaries\n    - Milestone celebration with shareable cards\n\n    LEARNING & SUPPORT (already included):\n    - AI Chat assistant for developmental questions\n    - Learning Hub with age-appropriate activities\n    - Milestone guides for each developmental stage\n    - Memory Journal for capturing special moments\n\n    Your role is to:\n    ✓ Help parents UNDERSTAND what developmental changes to expect\n    ✓ EDUCATE about why milestones matter and how they connect\n    ✓ EXPLAIN what they're observing in their daily tracking\n    ✓ Build CONFIDENCE in recognizing developmental progress\n\n    Do NOT suggest the app features that already exist\n    DO focus on helping parents interpret behaviors, understand developmental stages, and celebrate progress\n\n    {{_.role(\"user\")}}\n    Provide 3-5 developmental milestone tips and observations for week {{week}} of a newborn's life.\n    {% if firstPregnancy %}Parents are first-timers.{% endif %}\n\n    Baby: {{babyName}}\n    {% if babySex %}Sex: {{babySex}}\n    CRITICAL: Use grammatically correct pronouns throughout ALL generated content:\n    {% if babySex == \"M\" or babySex == \"male\" %}\n    - Use: he, him, his (e.g., \"Watch how he tracks objects\", \"His head control\", \"Encourage him\")\n    {% elif babySex == \"F\" or babySex == \"female\" %}\n    - Use: she, her, hers (e.g., \"Watch how she tracks objects\", \"Her head control\", \"Encourage her\")\n    {% else %}\n    - Use: they, them, their (e.g., \"Watch how they track objects\", \"Their head control\", \"Encourage them\")\n    {% endif %}\n    {% else %}\n    - Use gender-neutral: they, them, their when sex is unknown\n    {% endif %}\n\n    Baby Context:\n    - Age: {{ageInDays}} days ({{week}} weeks)\n    {% if currentWeightOz and birthWeightOz %}- Weight: {{currentWeightOz}}oz (birth: {{birthWeightOz}}oz, {% if currentWeightOz > birthWeightOz %}gained {{currentWeightOz - birthWeightOz}}oz{% endif %}){% endif %}\n    {% if height %}- Height: {{height}}cm{% endif %}\n    {% if headCircumference %}- Head circumference: {{headCircumference}}cm{% endif %}\n\n    {% if feedingCount24h or sleepCount24h %}\n    Recent Activity (24h):\n    {% if feedingCount24h %}- Feedings: {{feedingCount24h}}{% endif %}\n    {% if sleepCount24h %}- Sleep sessions: {{sleepCount24h}}{% endif %}\n    {% endif %}\n\n    {% if recentChatTopics %}\n    ═══════════════════════════════════════════════════════════════\n    RECENT DISCUSSION CONTEXT\n    ═══════════════════════════════════════════════════════════════\n    {{recentChatTopics}}\n    {% endif %}\n\n    {% if achievedMilestones %}\n    ═══════════════════════════════════════════════════════════════\n    RECENTLY ACHIEVED MILESTONES\n    ═══════════════════════════════════════════════════════════════\n    {{achievedMilestones}}\n    {% endif %}\n\n    {% if activitySummary %}\n    ═══════════════════════════════════════════════════════════════\n    DETAILED ACTIVITY SUMMARY (LAST 3 DAYS)\n    ═══════════════════════════════════════════════════════════════\n    {{activitySummary}}\n    {% endif %}\n\n    {% if parentWellness %}\n    ═══════════════════════════════════════════════════════════════\n    PARENT WELLNESS CONTEXT\n    ═══════════════════════════════════════════════════════════════\n    {{parentWellness}}\n    {% endif %}\n\n    {% if medicalContext %}\n    ═══════════════════════════════════════════════════════════════\n    MEDICAL CONTEXT\n    ═══════════════════════════════════════════════════════════════\n    {{medicalContext}}\n    {% endif %}\n\n    For each tip, provide:\n    - category: Choose one of: 'feeding', 'sleep', 'diaper', 'development', 'health', or 'postpartum'\n    - subtitle: A catchy 4-5 word subtitle (max 5 words)\n    - summary: One concise sentence (max 12 words)\n    - bulletPoints: 2-3 actionable bullet points (each bullet max 15 words)\n    - followUpQuestion: ONE focused question\n\n    CRITICAL YES/NO QUESTION REQUIREMENTS:\n\n    * MANDATORY: At least TWO tips MUST have isYesNoQuestion: true\n    * DEFAULT RULE: If the question can be answered with yes/no, SET isYesNoQuestion: true\n\n    * YES/NO QUESTIONS (isYesNoQuestion: true) - PREFERRED for health/milestones:\n      Examples:\n      - \"Has {{babyName}} had a wet diaper in the last 12 hours?\"\n      - \"Is {{babyName}} tracking your face when you move?\"\n      - \"Does {{babyName}} startle at loud noises?\"\n      - \"Is {{babyName}} starting to smile at you?\"\n      - \"Has {{babyName}} had a bowel movement today?\"\n\n    * When isYesNoQuestion: true, you MUST set openChatOnNo and/or openChatOnYes:\n      - openChatOnNo: true → If \"no\" needs support (e.g., no wet diapers, not eating)\n      - openChatOnYes: true → If \"yes\" needs support (e.g., showing distress)\n      - ALWAYS provide the corresponding prompt\n\n    * OPEN-ENDED QUESTIONS (isYesNoQuestion: false) - Use for qualitative details:\n      - \"What new sounds has {{babyName}} made today?\"\n      - \"What does {{babyName}} do during tummy time?\"\n\n    DECISION TREE FOR EACH TIP:\n    1. Can this be answered yes/no? → isYesNoQuestion: true\n    2. Does it need qualitative details? → isYesNoQuestion: false\n    3. For 'health' or 'diaper' categories → ALWAYS use isYesNoQuestion: true\n\n    Make each tip:\n    - Include what parents might observe this week in their daily care\n    - Explain WHY this development is important and how it connects to future milestones\n    - Use {{babyName}}'s name naturally in the content when appropriate\n    - Reference their tracked activities when relevant (e.g., \"during feeding sessions\")\n    - Educational about developmental neuroscience in accessible terms\n    - Reassure that development has a range, not a rigid timeline\n    - Varied in category to cover different developmental areas\n\n    Be informative but not alarming. Emphasize that all babies develop at their own pace.\n\n    {{ ctx.output_format }}\n  \"#\n}\n\n// ============================================================================\n// Tests\n// ============================================================================\n\ntest newborn_milestone_week_2 {\n  functions [NewbornWeekMilestone]\n  args {\n    babyName \"Riley\"\n    week 2\n    babySex \"F\"\n    firstPregnancy true\n    ageInDays 14\n    currentWeightOz 125\n    birthWeightOz 115\n    height 52\n    headCircumference 36\n    feedingCount24h 9\n    sleepCount24h 7\n  }\n}\n\ntest newborn_milestone_week_8 {\n  functions [NewbornWeekMilestone]\n  args {\n    babyName \"Riley\"\n    week 8\n    babySex \"M\"\n    firstPregnancy false\n    ageInDays 56\n    currentWeightOz 165\n    birthWeightOz 120\n    height 58\n    headCircumference 40\n    feedingCount24h 7\n    sleepCount24h 5\n  }\n}\n\n",
  "baby-development/sleep-regression-tips.baml": "// BAML function for sleep regression guidance\n// Provides AI-powered tips for handling baby sleep regressions\n\n// ============================================================================\n// Classes\n// ============================================================================\n\nclass SleepRegressionTipsOutput {\n  tips LearningTip[] @description(\"Array of 3-5 practical tips for handling sleep regression, personalized to the baby's current situation\")\n}\n\n// ============================================================================\n// Functions\n// ============================================================================\n\nfunction SleepRegressionTips(\n  babyName: string,\n  week: int,\n  ageInDays: int,\n  currentWeightOz: int?,\n  birthWeightOz: int?,\n  sleepCount24h: int?,\n  totalSleepHours24h: float?,\n  avgSleepHoursPerDay: float?,\n  feedingCount24h: int?\n) -> SleepRegressionTipsOutput {\n  client CustomGPT4oMini\n  prompt #\"\n    {{_.role(\"system\")}}\n    You are a pediatric sleep consultant providing practical advice for common sleep regressions.\n\n    IMPORTANT CONTEXT - About the Nugget App:\n    The parents are using Nugget, a comprehensive parenting app that already provides:\n\n    TRACKING CAPABILITIES (already built-in):\n    - Sleep tracking with start/end times, duration, and patterns\n    - Feeding logs (breastfeeding, bottle, pumping) with amounts and timing\n    - Diaper changes, growth measurements, activities\n    - Automatic pattern recognition and sleep trend analysis\n\n    ANALYSIS & INSIGHTS (already available):\n    - Visual sleep charts showing patterns over time\n    - Predictive cards suggesting when next sleep is likely\n    - Daily and weekly sleep summaries\n    - Correlation analysis between feeding, activities, and sleep\n\n    LEARNING & SUPPORT (already included):\n    - AI Chat assistant for personalized sleep questions\n    - Learning Hub with sleep training resources\n    - Sleep Plans feature for structured approaches\n    - Partner Support guides for coordinating care\n\n    Your role is to:\n    ✓ Help parents UNDERSTAND why sleep regressions happen\n    ✓ EDUCATE about developmental leaps affecting sleep\n    ✓ EXPLAIN what their tracked data reveals about patterns\n    ✓ Build CONFIDENCE that regressions are temporary\n\n    Do NOT suggest tracking features the app already has\n    DO focus on helping them interpret sleep data, understand developmental stages, and adapt their approach\n\n    {{_.role(\"user\")}}\n    Provide 3-5 practical tips for handling sleep regression around week {{week}}.\n\n    Baby: {{babyName}}\n\n    Baby Context:\n    - Age: {{ageInDays}} days ({{week}} weeks)\n    {% if currentWeightOz and birthWeightOz %}- Weight: {{currentWeightOz}}oz (birth: {{birthWeightOz}}oz){% endif %}\n\n    {% if sleepCount24h or avgSleepHoursPerDay %}\n    Sleep Patterns:\n    {% if sleepCount24h %}- Last 24h: {{sleepCount24h}} sessions{% if totalSleepHours24h %}, {{totalSleepHours24h}}h total{% endif %}{% endif %}\n    {% if avgSleepHoursPerDay %}- Weekly average: {{avgSleepHoursPerDay}}h per day{% endif %}\n    {% endif %}\n\n    {% if feedingCount24h %}- Recent feedings (24h): {{feedingCount24h}}{% endif %}\n\n    For each tip, provide:\n    - category: Choose one of: 'feeding', 'sleep', 'diaper', 'development', 'health', or 'postpartum'\n    - subtitle: A catchy 4-5 word subtitle (max 5 words)\n    - summary: One concise sentence (max 12 words)\n    - bulletPoints: 2-3 actionable bullet points (each bullet max 15 words)\n    - followUpQuestion: ONE focused question\n\n    CRITICAL YES/NO QUESTION REQUIREMENTS:\n\n    * MANDATORY: At least TWO tips MUST have isYesNoQuestion: true\n    * DEFAULT RULE: If the question can be answered with yes/no, SET isYesNoQuestion: true\n\n    * YES/NO QUESTIONS (isYesNoQuestion: true) - PREFERRED for sleep concerns:\n      Examples:\n      - \"Is {{babyName}} showing distress at bedtime?\"\n      - \"Does {{babyName}} cry when waking at night?\"\n      - \"Is {{babyName}} resisting sleep more than usual?\"\n      - \"Does {{babyName}} show clear tiredness cues?\"\n      - \"Is {{babyName}} waking more frequently than last week?\"\n\n    * When isYesNoQuestion: true, you MUST set openChatOnYes and/or openChatOnNo:\n      - openChatOnYes: true → If \"yes\" indicates concern (distress, resisting sleep)\n      - openChatOnNo: true → If \"no\" indicates concern (no tiredness cues)\n      - ALWAYS provide the corresponding prompt\n\n    * OPEN-ENDED QUESTIONS (isYesNoQuestion: false) - Use for qualitative details:\n      - \"What does {{babyName}} do when waking at night?\"\n      - \"How does {{babyName}} settle back to sleep?\"\n\n    DECISION TREE FOR EACH TIP:\n    1. Can this be answered yes/no? → isYesNoQuestion: true\n    2. Does it need qualitative details? → isYesNoQuestion: false\n    3. For sleep concerns or behavioral changes → PREFER isYesNoQuestion: true\n\n    Make each tip:\n    - Specific and actionable\n    - Reference their actual tracked sleep data when relevant (e.g., \"Your logs show 3 wake-ups\")\n    - Use {{babyName}}'s name naturally in the content when appropriate\n    - Educational about WHY regressions happen, not just what to do\n    - Empathetic to exhausted parents while building understanding\n    - Help parents see temporary patterns vs. new baselines\n    - Varied in category where appropriate\n\n    {{ ctx.output_format }}\n  \"#\n}\n\n// ============================================================================\n// Tests\n// ============================================================================\n\ntest sleep_regression_week_4 {\n  functions [SleepRegressionTips]\n  args {\n    babyName \"Riley\"\n    week 4\n    ageInDays 28\n    currentWeightOz 140\n    birthWeightOz 115\n    sleepCount24h 6\n    totalSleepHours24h 12.0\n    avgSleepHoursPerDay 13.5\n    feedingCount24h 8\n  }\n}\n\ntest sleep_regression_week_12 {\n  functions [SleepRegressionTips]\n  args {\n    babyName \"Riley\"\n    week 12\n    ageInDays 84\n    currentWeightOz 180\n    birthWeightOz 115\n    sleepCount24h 5\n    totalSleepHours24h 11.0\n    avgSleepHoursPerDay 12.0\n    feedingCount24h 6\n  }\n}\n\n",
  "chat/baby-assistant.baml": "// BAML function for AI chat assistant\n// Provides multi-turn conversational support for parents with personalized baby context\n\n// ============================================================================\n// Classes\n// ============================================================================\n\nclass ChatMessage {\n  role string @description(\"The role of the message sender: 'user' or 'assistant'\")\n  content string @description(\"The content of the message\")\n}\n\nclass BabyContext {\n  babyName string @description(\"The baby's name\")\n  ageInDays int @description(\"Baby's age in days\")\n  ageInWeeks int @description(\"Baby's age in weeks\")\n  currentWeightOz int? @description(\"Current weight in ounces\")\n  birthWeightOz int? @description(\"Birth weight in ounces\")\n  feedingCount24h int? @description(\"Number of feedings in last 24 hours\")\n  avgFeedingInterval float? @description(\"Average hours between feedings\")\n  sleepCount24h int? @description(\"Number of sleep sessions in last 24 hours\")\n  totalSleepHours24h float? @description(\"Total hours of sleep in last 24 hours\")\n  diaperCount24h int? @description(\"Number of diaper changes in last 24 hours\")\n}\n\nclass BabyAssistantChatOutput {\n  response string @description(\"The AI assistant's response to the user's question\")\n}\n\n// ============================================================================\n// Functions\n// ============================================================================\n\nfunction BabyAssistantChat(\n  conversationHistory: ChatMessage[],\n  babyContext: BabyContext,\n  userQuestion: string,\n  systemPrompt: string?\n) -> BabyAssistantChatOutput {\n  client CustomGPT4o\n  prompt #\"\n    {{_.role(\"system\")}}\n    {% if systemPrompt %}{{systemPrompt}}{% else %}You are Nugget, a knowledgeable and empathetic AI parenting assistant specialized in infant care. You provide evidence-based advice while being supportive and encouraging. You have access to the user's baby's data to give personalized guidance.{% endif %}\n\n    Baby Information:\n    - Name: {{babyContext.babyName}}\n    - Age: {{babyContext.ageInDays}} days ({{babyContext.ageInWeeks}} weeks)\n    {% if babyContext.currentWeightOz and babyContext.birthWeightOz %}- Weight: {{babyContext.currentWeightOz}}oz (birth: {{babyContext.birthWeightOz}}oz, {% if babyContext.currentWeightOz > babyContext.birthWeightOz %}gained {{babyContext.currentWeightOz - babyContext.birthWeightOz}}oz{% else %}change {{babyContext.currentWeightOz - babyContext.birthWeightOz}}oz{% endif %}){% endif %}\n\n    {% if babyContext.feedingCount24h or babyContext.sleepCount24h or babyContext.diaperCount24h %}\n    Recent Activity (Last 24 hours):\n    {% if babyContext.feedingCount24h %}- Feedings: {{babyContext.feedingCount24h}}{% if babyContext.avgFeedingInterval %} (avg {{babyContext.avgFeedingInterval}}h intervals){% endif %}{% endif %}\n    {% if babyContext.sleepCount24h %}- Sleep: {{babyContext.sleepCount24h}} sessions{% if babyContext.totalSleepHours24h %} ({{babyContext.totalSleepHours24h}}h total){% endif %}{% endif %}\n    {% if babyContext.diaperCount24h %}- Diapers: {{babyContext.diaperCount24h}} changes{% endif %}\n    {% endif %}\n\n    Guidelines:\n    - Reference {{babyContext.babyName}}'s actual data when relevant\n    - Keep responses conversational and warm\n    - Provide actionable advice when appropriate\n    - Acknowledge when professional medical advice is needed\n    - Use markdown formatting for better readability\n    - Be concise but thorough\n\n    {% if conversationHistory|length > 0 %}\n    Previous conversation:\n    {% for message in conversationHistory %}\n    {{message.role}}: {{message.content}}\n    {% endfor %}\n    {% endif %}\n\n    {{_.role(\"user\")}}\n    {{userQuestion}}\n\n    {{ ctx.output_format }}\n  \"#\n}\n\n// ============================================================================\n// Function for auto-generating chat titles\n// ============================================================================\n\nclass ChatTitleOutput {\n  title string @description(\"A concise 3-6 word title for the chat based on the topic\")\n}\n\nfunction GenerateChatTitle(\n  firstUserMessage: string,\n  firstAssistantResponse: string\n) -> ChatTitleOutput {\n  client CustomGPT4oMini\n  prompt #\"\n    {{_.role(\"system\")}}\n    You are a title generator. Create a concise, descriptive title (3-6 words) for this conversation based on the user's first question and the assistant's response.\n\n    {{_.role(\"user\")}}\n    User asked: {{firstUserMessage}}\n\n    Assistant responded: {{firstAssistantResponse}}\n\n    Generate a short, clear title that captures the main topic of this conversation. Do not include quotes.\n\n    {{ ctx.output_format }}\n  \"#\n}\n\n// ============================================================================\n// Tests\n// ============================================================================\n\ntest baby_assistant_first_question {\n  functions [BabyAssistantChat]\n  args {\n    conversationHistory []\n    babyContext {\n      babyName \"Emma\"\n      ageInDays 14\n      ageInWeeks 2\n      currentWeightOz 120\n      birthWeightOz 115\n      feedingCount24h 8\n      avgFeedingInterval 3.0\n      sleepCount24h 6\n      totalSleepHours24h 14.0\n      diaperCount24h 8\n    }\n    userQuestion \"How can I help Emma sleep better at night?\"\n  }\n}\n\ntest chat_title_generation {\n  functions [GenerateChatTitle]\n  args {\n    firstUserMessage \"How can I help Emma sleep better at night?\"\n    firstAssistantResponse \"Here are some age-appropriate tips to help Emma sleep better: establish a bedtime routine, ensure she's well-fed before bed, and create a calm sleep environment.\"\n  }\n}\n\n",
  "clients.baml": "// Learn more about clients at https://docs.boundaryml.com/docs/snippets/clients/overview\n\nclient<llm> CustomGPT4o {\n  provider openai\n  retry_policy Exponential\n  options {\n    model \"gpt-4o\"\n    api_key env.OPENAI_API_KEY\n  }\n}\n\nclient<llm> CustomGPT4oMini {\n  provider openai\n  retry_policy Exponential\n  options {\n    model \"gpt-5.1\"\n    api_key env.OPENAI_API_KEY\n  }\n}\n\nretry_policy Exponential {\n  max_retries 2\n  // Strategy is optional\n  strategy {\n    type exponential_backoff\n    delay_ms 300\n    multiplier 1.5\n    max_delay_ms 10000\n  }\n}",
  "common-types.baml": "// Common types shared across BAML functions\n\n// ============================================================================\n// Classes\n// ============================================================================\n\nclass LearningTip {\n  category string @description(\"Category: 'feeding', 'sleep', 'diaper', 'development', 'health', or 'postpartum'\")\n  subtitle string @description(\"A catchy subtitle (max 5 words)\")\n  summary string @description(\"One concise sentence (max 12 words)\")\n  bulletPoints string[] @description(\"2-3 actionable bullet points (each max 15 words)\")\n  followUpQuestion string @description(\"A focused follow-up question (max 15 words)\")\n\n  // Yes/No Question Support\n  isYesNoQuestion bool? @description(\"If true, this is a yes/no question (not open-ended). If false or omitted, it's an open-ended question.\")\n  openChatOnYes bool? @description(\"Whether to open chat dialog when user clicks 'Yes'. Only relevant if isYesNoQuestion is true.\")\n  openChatOnNo bool? @description(\"Whether to open chat dialog when user clicks 'No'. Only relevant if isYesNoQuestion is true.\")\n}\n\n",
  "engagement/appointment-nudge.baml": "// BAML function for appointment reminders\n// Provides AI-powered friendly appointment nudges\n\n// ============================================================================\n// Classes\n// ============================================================================\n\nclass AppointmentNudgeOutput {\n  text string @description(\"Friendly reminder about the importance of the appointment (1-2 sentences).\")\n}\n\n// ============================================================================\n// Functions\n// ============================================================================\n\nfunction AppointmentNudge(\n  type: string\n) -> AppointmentNudgeOutput {\n  client CustomGPT4oMini\n  prompt #\"\n    {{_.role(\"system\")}}\n    You are a healthcare reminder assistant helping parents stay on top of important appointments.\n\n    {{_.role(\"user\")}}\n    Create a friendly reminder about the importance of: {{type}}\n\n    Keep it brief (1-2 sentences) and encouraging, not scary.\n\n    {{ ctx.output_format }}\n  \"#\n}\n\n// ============================================================================\n// Tests\n// ============================================================================\n\ntest appointment_nudge_prenatal {\n  functions [AppointmentNudge]\n  args {\n    type \"prenatal checkup\"\n  }\n}\n\ntest appointment_nudge_pediatric {\n  functions [AppointmentNudge]\n  args {\n    type \"2-week pediatric visit\"\n  }\n}\n\n",
  "engagement/stale-prompts.baml": "// BAML function for re-engagement prompts\n// Provides AI-powered conversation starters for stale topics\n\n// ============================================================================\n// Classes\n// ============================================================================\n\nclass StalePromptsOutput {\n  list string[] @description(\"Array of 3 engaging conversation starters to help user re-engage with a stale topic. Make them specific and actionable.\")\n}\n\n// ============================================================================\n// Functions\n// ============================================================================\n\nfunction StalePrompts(\n  topic: string,\n  context: map<string, string>\n) -> StalePromptsOutput {\n  client CustomGPT4oMini\n  prompt #\"\n    {{_.role(\"system\")}}\n    You are a conversational AI helping re-engage users with topics they haven't updated recently.\n\n    {{_.role(\"user\")}}\n    Generate 3 engaging conversation starters for the topic: {{topic}}\n\n    Context: {{context}}\n\n    Make them:\n    - Specific and actionable\n    - Encouraging, not nagging\n    - Relevant to new parents\n\n    {{ ctx.output_format }}\n  \"#\n}\n\n// ============================================================================\n// Tests\n// ============================================================================\n\ntest stale_prompts_birth_plan {\n  functions [StalePrompts]\n  args {\n    topic \"birth plan\"\n    context {\n      lastUpdated \"2024-01-15\"\n      dueDate \"2024-03-20\"\n      completionPercentage \"30\"\n    }\n  }\n}\n\ntest stale_prompts_hospital_bag {\n  functions [StalePrompts]\n  args {\n    topic \"hospital bag\"\n    context {\n      lastUpdated \"2024-02-01\"\n      dueDate \"2024-03-15\"\n      itemsPacked \"5\"\n    }\n  }\n}\n\n",
  "generators.baml": "// This helps use auto generate libraries you can use in the language of\n// your choice. You can have multiple generators if you use multiple languages.\n// Just ensure that the output_dir is different for each generator.\ngenerator target {\n    // Valid values: \"python/pydantic\", \"typescript\", \"ruby/sorbet\", \"rest/openapi\"\n    output_type \"typescript/react\"\n\n    // Where the generated code will be saved (relative to baml_src/)\n    output_dir \"../\"\n\n    // The version of the BAML package you have installed (e.g. same version as your baml-py or @boundaryml/baml).\n    // The BAML VSCode extension version should also match this version.\n    version \"0.213.0\"\n\n    // Valid values: \"sync\", \"async\"\n    // This controls what `b.FunctionName()` will be (sync or async).\n    default_client_mode async\n}\n",
  "improvement_suggestions.baml": "// Suggestions for improvement\nclass ImprovementSuggestions {\n  seo string[] @description(\"Actionable SEO improvement suggestions.\")\n  accessibility string[] @description(\"Actionable accessibility improvement suggestions.\")\n  performance string[] @description(\"Actionable performance improvement suggestions.\")\n  overall_priority string[] @description(\"Prioritized list of most important actions.\")\n}\n\nfunction SuggestImprovements(\n  seo: string,\n  accessibility: string,\n  structure: string\n) -> ImprovementSuggestions {\n  client \"openai/gpt-4o\"\n  prompt #\"\n    {{_.role(\"user\")}}\n    Given the following website analysis:\n    SEO Metadata: {{ seo }}\n    Accessibility: {{ accessibility }}\n    Content Structure: {{ structure }}\n\n    Provide actionable suggestions for:\n    - SEO improvements\n    - Accessibility enhancements\n    - Performance optimizations\n\n    Prioritize the most important actions for a developer to take.\n    {{ ctx.output_format }}\n  \"#\n}\n\ntest suggest_improvements_example {\n  functions [SuggestImprovements]\n  args {\n    seo {\n      meta_title \"GitHub: Where the world builds software\"\n      meta_description \"GitHub is where over 100 million developers shape the future of software.\"\n      canonical_url \"https://github.com/\"\n      og_title \"GitHub\"\n      og_description \"Build software better, together.\"\n      twitter_card \"summary_large_image\"\n    }\n    accessibility {\n      missing_alt_text false\n      contrast_issues []\n      aria_labels_missing false\n      summary \"No major accessibility issues detected.\"\n    }\n    structure {\n      headings { h1 1, h2 3 }\n      semantic_tags [\"nav\", \"main\", \"footer\"]\n      main_sections [\"Header\", \"Main content\", \"Footer\"]\n    }\n  }\n}",
  "learning/daily-learning-planner.baml": "// BAML function for planning daily learning content\n// Phase 1: Determines WHAT content to generate (categories, titles, relevance)\n// Phase 2: Stage-specific prompts will generate the actual content\n\n// ============================================================================\n// Classes\n// ============================================================================\n\nclass LearningPlanItem {\n  category string @description(\"Category: 'feeding', 'sleep', 'diaper', 'development', 'health', or 'postpartum'\")\n  title string @description(\"Specific topic title (e.g., 'First Meconium Diaper', 'Milk Coming In')\")\n  subtitle string @description(\"Short catchy subtitle (max 5 words)\")\n  relevance string @description(\"Why this is relevant NOW based on baby's data and context (1 sentence, max 20 words)\")\n  priority int @description(\"Priority 1-5 (5=urgent/critical, 1=nice-to-know)\")\n  avoidDuplicateOf string[] @description(\"List of recently covered topic IDs to avoid duplicating\")\n  recommendYesNo bool @description(\"Whether this topic should use a yes/no question (true for health/safety checks)\")\n}\n\nclass DailyLearningPlan {\n  items LearningPlanItem[] @description(\"2-3 planned learning items, prioritized and balanced\")\n  reasoning string @description(\"Brief explanation of why these items were chosen (2-3 sentences)\")\n  coveredCategories string[] @description(\"Categories covered in this plan for balance checking\")\n  urgentHealthChecks bool @description(\"Whether any urgent health checks are included\")\n}\n\n// ============================================================================\n// Functions\n// ============================================================================\n\nfunction DailyLearningPlanner(\n  // Baby basics\n  babyName: string,\n  babySex: string?,\n  ageInDays: int,\n  ageInWeeks: int,\n  firstTimeParent: bool,\n\n  // Growth metrics\n  currentWeightOz: int?,\n  birthWeightOz: int?,\n  height: int?,\n\n  // Recent activity (24h)\n  feedingCount24h: int?,\n  avgFeedingInterval: float?,\n  sleepCount24h: int?,\n  totalSleepHours24h: float?,\n  diaperCount24h: int?,\n\n  // Weekly patterns\n  avgFeedingsPerDay: float?,\n  avgSleepHoursPerDay: float?,\n  avgDiaperChangesPerDay: float?,\n\n  // Rich context for deduplication and relevance\n  recentChatTopics: string?,\n  recentlyCoveredTopics: string?,\n  achievedMilestones: string?,\n  activitySummary: string?,\n  parentWellness: string?,\n  medicalContext: string?\n) -> DailyLearningPlan {\n  client CustomGPT4oMini\n  prompt #\"\n    {{_.role(\"system\")}}\n    You are a planning AI for a newborn care app. Your job is to PLAN what learning content to generate, not generate the content itself.\n\n    Your task:\n    1. Analyze the baby's current context, age, and recent activities\n    2. Identify 2-3 topics that are MOST relevant RIGHT NOW\n    3. Avoid duplicating recently covered topics\n    4. Balance categories (don't do 3 feeding tips in a row)\n    5. Prioritize urgent health/safety topics over nice-to-know information\n\n    CRITICAL: You are NOT generating the full learning tips here. You are only planning WHAT topics to cover.\n    The actual content will be generated by stage-specific prompts in the next phase.\n\n    {{_.role(\"user\")}}\n    Plan 2-3 learning topics for {{babyName}} ({{ageInDays}} days old, {{ageInWeeks}} weeks).\n\n    {% if babySex %}Sex: {{babySex}}{% endif %}\n    {% if firstTimeParent %}This is a first-time parent - provide foundational information.{% endif %}\n\n    ═══════════════════════════════════════════════════════════════\n    BABY METRICS & RECENT ACTIVITY\n    ═══════════════════════════════════════════════════════════════\n    {% if currentWeightOz and birthWeightOz %}\n    Weight: {{currentWeightOz}}oz (birth: {{birthWeightOz}}oz, change: {{currentWeightOz - birthWeightOz}}oz)\n    {% endif %}\n    {% if height %}Height: {{height}}cm{% endif %}\n\n    Last 24 hours:\n    {% if feedingCount24h %}- Feedings: {{feedingCount24h}}{% if avgFeedingInterval %} (avg {{avgFeedingInterval}}h intervals){% endif %}{% endif %}\n    {% if sleepCount24h %}- Sleep: {{sleepCount24h}} sessions{% if totalSleepHours24h %} ({{totalSleepHours24h}}h total){% endif %}{% endif %}\n    {% if diaperCount24h %}- Diapers: {{diaperCount24h}} changes{% endif %}\n\n    {% if avgFeedingsPerDay or avgSleepHoursPerDay or avgDiaperChangesPerDay %}\n    Weekly patterns:\n    {% if avgFeedingsPerDay %}- Avg feedings/day: {{avgFeedingsPerDay}}{% endif %}\n    {% if avgSleepHoursPerDay %}- Avg sleep/day: {{avgSleepHoursPerDay}}h{% endif %}\n    {% if avgDiaperChangesPerDay %}- Avg diapers/day: {{avgDiaperChangesPerDay}}{% endif %}\n    {% endif %}\n\n    {% if recentChatTopics %}\n    ═══════════════════════════════════════════════════════════════\n    RECENT CHAT TOPICS (LAST 7 DAYS)\n    ═══════════════════════════════════════════════════════════════\n    {{recentChatTopics}}\n\n    IMPORTANT: If parents have been asking about a topic, consider it HIGH priority.\n    {% endif %}\n\n    {% if recentlyCoveredTopics %}\n    ═══════════════════════════════════════════════════════════════\n    RECENTLY COVERED LEARNING TOPICS (LAST 14 DAYS)\n    ═══════════════════════════════════════════════════════════════\n    {{recentlyCoveredTopics}}\n\n    CRITICAL: AVOID duplicating these topics unless urgent/critical health concern.\n    {% endif %}\n\n    {% if achievedMilestones %}\n    ═══════════════════════════════════════════════════════════════\n    RECENTLY ACHIEVED MILESTONES\n    ═══════════════════════════════════════════════════════════════\n    {{achievedMilestones}}\n    {% endif %}\n\n    {% if activitySummary %}\n    ═══════════════════════════════════════════════════════════════\n    DETAILED ACTIVITY SUMMARY (LAST 3 DAYS)\n    ═══════════════════════════════════════════════════════════════\n    {{activitySummary}}\n    {% endif %}\n\n    {% if parentWellness %}\n    ═══════════════════════════════════════════════════════════════\n    PARENT WELLNESS CONTEXT\n    ═══════════════════════════════════════════════════════════════\n    {{parentWellness}}\n    {% endif %}\n\n    {% if medicalContext %}\n    ═══════════════════════════════════════════════════════════════\n    MEDICAL CONTEXT\n    ═══════════════════════════════════════════════════════════════\n    {{medicalContext}}\n    {% endif %}\n\n    DEVELOPMENTAL STAGE FOCUS:\n    {% if ageInDays >= 1 and ageInDays <= 3 %}\n    Stage: Immediate Postbirth (Days 1-3)\n    Focus: Feeding initiation, meconium/diaper output, cord care, jaundice, when to call doctor\n    Priority topics: first-meconium, colostrum-feeding, cord-care, jaundice-monitoring, safe-sleep-basics\n    {% elif ageInDays >= 4 and ageInDays <= 7 %}\n    Stage: First Week (Days 4-7)\n    Focus: Milk coming in, cluster feeding, day/night confusion, safe sleep, normal behaviors\n    Priority topics: milk-coming-in, cluster-feeding, day-night-confusion, diaper-color-transition, postpartum-recovery\n    {% elif ageInDays >= 8 and ageInDays <= 14 %}\n    Stage: Second Week (Days 8-14)\n    Focus: Reading cues, developmental observations, feeding efficiency, two-week checkup prep\n    Priority topics: hunger-cues, sleep-cues, developmental-tracking, tummy-time-intro, weight-gain, two-week-checkup\n    {% elif ageInDays >= 15 and ageInDays <= 21 %}\n    Stage: Third Week (Days 15-21)\n    Focus: Emerging patterns, early social smiles, tracking, sleep patterns, growth monitoring\n    Priority topics: feeding-patterns, early-smiling, visual-tracking, sleep-stretches, growth-spurts\n    {% elif ageInDays >= 22 and ageInDays <= 42 %}\n    Stage: Month One (Weeks 4-6)\n    Focus: One-month milestones, routine establishment, social interaction, physical development\n    Priority topics: one-month-milestones, social-smiling, head-control, feeding-schedule, sleep-regression-4week\n    {% elif ageInDays >= 43 and ageInDays <= 70 %}\n    Stage: Month Two (Weeks 7-10)\n    Focus: Vocalization, increased alertness, hand-eye coordination, sleep consolidation\n    Priority topics: cooing-sounds, batting-at-objects, longer-sleep-stretches, two-month-milestones, vaccines-2month\n    {% elif ageInDays >= 71 and ageInDays <= 112 %}\n    Stage: Months Three-Four (Weeks 11-16)\n    Focus: Major milestones, sleep regression, increased interaction, motor development\n    Priority topics: four-month-sleep-regression, rolling-over, laughing, reaching-grasping, four-month-checkup\n    {% endif %}\n\n    PLANNING GUIDELINES:\n\n    1. **Priority Scoring (1-5)**:\n       - 5 = Urgent health/safety concern (no wet diapers, signs of distress, feeding issues)\n       - 4 = Important developmental milestone or health check for this age\n       - 3 = Relevant topic based on recent activity patterns\n       - 2 = Helpful information for current stage\n       - 1 = Nice-to-know but not urgent\n\n    2. **Category Balance**:\n       - Mix categories across the 2-3 items\n       - Don't do 3 feeding tips unless urgent health concern\n       - Prioritize 'health' and 'diaper' for early days (Days 1-7)\n\n    3. **Deduplication**:\n       - Check recentlyCoveredTopics and AVOID unless urgent\n       - Use avoidDuplicateOf to list recently covered topic IDs\n\n    4. **Yes/No Recommendations**:\n       - Set recommendYesNo: true for health checks, safety concerns, binary observations\n       - Categories that typically need yes/no: health, diaper (in early days), feeding (latching issues)\n\n    5. **Relevance**:\n       - Reference specific data points (e.g., \"{{babyName}} had only 4 diapers in 24h\")\n       - Connect to developmental stage\n       - Explain WHY this matters NOW\n\n    6. **Topic Titles**:\n       - Be specific (not \"Feeding Tips\" but \"Colostrum: Your Baby's First Food\")\n       - Match stage-appropriate language\n       - Make it actionable\n\n    For each planned item, provide:\n    - **category**: One of the 6 categories\n    - **title**: Specific topic (e.g., \"First Meconium Diaper\", not just \"Diapers\")\n    - **subtitle**: Catchy 3-5 word subtitle\n    - **relevance**: Why THIS topic for THIS baby NOW (reference their data)\n    - **priority**: 1-5 score\n    - **avoidDuplicateOf**: List of recently covered topic IDs (if any)\n    - **recommendYesNo**: true for health/safety checks\n\n    Also provide:\n    - **reasoning**: 2-3 sentences explaining your choices\n    - **coveredCategories**: List of categories in your plan\n    - **urgentHealthChecks**: true if any priority 5 items included\n\n    {{ ctx.output_format }}\n  \"#\n}\n\n// ============================================================================\n// Tests\n// ============================================================================\n\ntest daily_learning_planner_day_3 {\n  functions [DailyLearningPlanner]\n  args {\n    babyName \"Riley\"\n    babySex \"F\"\n    ageInDays 3\n    ageInWeeks 0\n    firstTimeParent true\n    currentWeightOz 115\n    birthWeightOz 118\n    feedingCount24h 10\n    avgFeedingInterval 2.4\n    sleepCount24h 8\n    totalSleepHours24h 16.0\n    diaperCount24h 5\n    recentChatTopics \"Parents asked about jaundice and whether yellow skin tone is normal\"\n  }\n}\n\ntest daily_learning_planner_week_2 {\n  functions [DailyLearningPlanner]\n  args {\n    babyName \"Jordan\"\n    babySex \"M\"\n    ageInDays 14\n    ageInWeeks 2\n    firstTimeParent false\n    currentWeightOz 125\n    birthWeightOz 115\n    feedingCount24h 8\n    sleepCount24h 6\n    diaperCount24h 8\n    recentlyCoveredTopics \"Topics covered: feeding-on-demand, safe-sleep-basics, cord-care\"\n    achievedMilestones \"First social smile achieved\"\n  }\n}\n\n",
  "learning/stages/first-week.baml": "// BAML function for Days 4-7 (First Week) learning content\n// Stage-specific expertise: milk coming in, cluster feeding, day/night confusion, diaper transition\n\n// ============================================================================\n// Functions\n// ============================================================================\n\nfunction GenerateLearningTip_FirstWeek(\n  // Plan item from planner\n  category: string,\n  title: string,\n  subtitle: string,\n  relevance: string,\n  recommendYesNo: bool,\n\n  // Baby context\n  babyName: string,\n  babySex: string?,\n  ageInDays: int,\n  currentWeightOz: int?,\n  birthWeightOz: int?,\n\n  // Recent activity\n  feedingCount24h: int?,\n  avgFeedingInterval: float?,\n  sleepCount24h: int?,\n  diaperCount24h: int?,\n\n  // Context for personalization\n  recentChatTopics: string?,\n  achievedMilestones: string?,\n  medicalContext: string?\n) -> LearningTip {\n  client CustomGPT4oMini\n  prompt #\"\n    {{_.role(\"system\")}}\n    You are a newborn care expert specializing in the FIRST WEEK period (Days 4-7).\n\n    Your expertise covers:\n    - MILK COMING IN: Engorgement, increased volume, supply establishing\n    - CLUSTER FEEDING: Why babies feed frequently, managing marathon sessions\n    - DAY/NIGHT CONFUSION: Circadian rhythm development, wake windows\n    - DIAPER TRANSITION: Meconium to yellow/seedy stools, what's normal\n    - NORMAL NEWBORN BEHAVIORS: Crying patterns, sleep cycles, reflexes\n    - FEEDING ON DEMAND: Responsive feeding, hunger cues\n    - POSTPARTUM RECOVERY: Basic self-care for parents\n    - SAFE SLEEP PRACTICES: Back to sleep, room sharing, avoiding hazards\n\n    Ground all information in AAP, CDC, and WHO guidelines.\n\n    {{_.role(\"user\")}}\n    Generate ONE learning tip for {{babyName}} (Day {{ageInDays}}).\n\n    PLANNED TOPIC:\n    - Category: {{category}}\n    - Title: {{title}}\n    - Subtitle: {{subtitle}}\n    - Relevance: {{relevance}}\n    - Recommend Yes/No Question: {{recommendYesNo}}\n\n    {% if babySex %}\n    Sex: {{babySex}}\n    {% if babySex == \"M\" or babySex == \"male\" %}\n    Use: he, him, his\n    {% elif babySex == \"F\" or babySex == \"female\" %}\n    Use: she, her, hers\n    {% else %}\n    Use: they, them, their\n    {% endif %}\n    {% else %}\n    Use: they, them, their\n    {% endif %}\n\n    BABY CONTEXT:\n    {% if currentWeightOz and birthWeightOz %}- Weight: {{currentWeightOz}}oz (birth: {{birthWeightOz}}oz, change: {{currentWeightOz - birthWeightOz}}oz){% endif %}\n    {% if feedingCount24h %}- Feedings (24h): {{feedingCount24h}}{% if avgFeedingInterval %} (avg {{avgFeedingInterval}}h intervals){% endif %}{% endif %}\n    {% if sleepCount24h %}- Sleep sessions (24h): {{sleepCount24h}}{% endif %}\n    {% if diaperCount24h %}- Diapers (24h): {{diaperCount24h}}{% endif %}\n\n    {% if recentChatTopics %}Recent parent questions: {{recentChatTopics}}{% endif %}\n    {% if achievedMilestones %}Achieved milestones: {{achievedMilestones}}{% endif %}\n    {% if medicalContext %}Medical context: {{medicalContext}}{% endif %}\n\n    Generate a LearningTip with:\n\n    1. **category**: {{category}}\n    2. **subtitle**: {{subtitle}}\n    3. **summary**: One sentence (max 12 words)\n    4. **bulletPoints**: 2-3 actionable points (each max 15 words)\n       - Focus on Days 4-7 specific guidance\n       - Address common concerns (milk coming in, cluster feeding)\n\n    5. **followUpQuestion**: ONE question (max 15 words)\n       {% if recommendYesNo %}\n       REQUIRED: YES/NO question\n       - Set isYesNoQuestion: true\n       - Examples for Days 4-7:\n         * \"Is {{babyName}} showing signs of increased hunger this week?\"\n         * \"Has {{babyName}}'s stool color changed from black to yellow?\"\n         * \"Are you noticing {{babyName}} sleeping more during the day than night?\"\n         * \"Is {{babyName}} having at least 6 wet diapers per day?\"\n       {% else %}\n       Open-ended question\n       - Set isYesNoQuestion: false\n       {% endif %}\n\n    6. **isYesNoQuestion**: {% if recommendYesNo %}true{% else %}false{% endif %}\n\n    7. **openChatOnYes/No**:\n       {% if recommendYesNo %}\n       Set appropriately based on which answer indicates concern\n       {% else %}\n       null\n       {% endif %}\n\n    CRITICAL GUIDELINES FOR DAYS 4-7:\n    - Normalize cluster feeding and frequent waking\n    - Explain milk supply regulating\n    - Reassure about day/night confusion\n    - Emphasize adequate diaper output as feeding indicator\n    - Mention when to contact pediatrician\n\n    {{ ctx.output_format }}\n  \"#\n}\n\n// ============================================================================\n// Tests\n// ============================================================================\n\ntest first_week_cluster_feeding {\n  functions [GenerateLearningTip_FirstWeek]\n  args {\n    category \"feeding\"\n    title \"Cluster Feeding is Normal\"\n    subtitle \"Marathon Feeding Sessions\"\n    relevance \"Jordan fed 12 times in 24h with short intervals\"\n    recommendYesNo false\n    babyName \"Jordan\"\n    babySex \"M\"\n    ageInDays 5\n    feedingCount24h 12\n    avgFeedingInterval 2.0\n  }\n}\n\n",
  "learning/stages/immediate-postbirth.baml": "// BAML function for Days 1-3 (Immediate Postbirth) learning content\n// Stage-specific expertise: meconium, colostrum, cord care, jaundice, first days basics\n\n// ============================================================================\n// Functions\n// ============================================================================\n\nfunction GenerateLearningTip_ImmediatePostbirth(\n  // Plan item from planner\n  category: string,\n  title: string,\n  subtitle: string,\n  relevance: string,\n  recommendYesNo: bool,\n\n  // Baby context\n  babyName: string,\n  babySex: string?,\n  ageInDays: int,\n  currentWeightOz: int?,\n  birthWeightOz: int?,\n\n  // Recent activity\n  feedingCount24h: int?,\n  avgFeedingInterval: float?,\n  sleepCount24h: int?,\n  diaperCount24h: int?,\n\n  // Context for personalization\n  recentChatTopics: string?,\n  achievedMilestones: string?,\n  medicalContext: string?\n) -> LearningTip {\n  client CustomGPT4oMini\n  prompt #\"\n    {{_.role(\"system\")}}\n    You are a newborn care expert specializing in the IMMEDIATE POSTBIRTH period (Days 1-3).\n\n    Your expertise covers:\n    - MECONIUM: First black, tarry stools and transition\n    - COLOSTRUM: First milk, small amounts, importance\n    - CORD CARE: Keeping dry, when it falls off, signs of infection\n    - JAUNDICE: When to watch for it, normal vs concerning levels\n    - FIRST FEEDING: Latching, frequency, cluster feeding\n    - WEIGHT LOSS: Normal to lose 5-10% of birth weight\n    - SAFE SLEEP: Back to sleep, firm surface basics\n    - WHEN TO CALL DOCTOR: Red flags for Days 1-3\n\n    Ground all information in:\n    - AAP (American Academy of Pediatrics) guidelines for newborns\n    - CDC infant care recommendations\n    - WHO newborn care protocols for first 72 hours\n\n    {{_.role(\"user\")}}\n    Generate ONE learning tip for {{babyName}} (Day {{ageInDays}}).\n\n    PLANNED TOPIC:\n    - Category: {{category}}\n    - Title: {{title}}\n    - Subtitle: {{subtitle}}\n    - Relevance: {{relevance}}\n    - Recommend Yes/No Question: {{recommendYesNo}}\n\n    {% if babySex %}\n    Sex: {{babySex}}\n    {% if babySex == \"M\" or babySex == \"male\" %}\n    Use: he, him, his\n    {% elif babySex == \"F\" or babySex == \"female\" %}\n    Use: she, her, hers\n    {% else %}\n    Use: they, them, their\n    {% endif %}\n    {% else %}\n    Use: they, them, their\n    {% endif %}\n\n    BABY CONTEXT:\n    {% if currentWeightOz and birthWeightOz %}- Weight: {{currentWeightOz}}oz (birth: {{birthWeightOz}}oz, change: {{currentWeightOz - birthWeightOz}}oz){% endif %}\n    {% if feedingCount24h %}- Feedings (24h): {{feedingCount24h}}{% if avgFeedingInterval %} (avg {{avgFeedingInterval}}h intervals){% endif %}{% endif %}\n    {% if sleepCount24h %}- Sleep sessions (24h): {{sleepCount24h}}{% endif %}\n    {% if diaperCount24h %}- Diapers (24h): {{diaperCount24h}}{% endif %}\n\n    {% if recentChatTopics %}Recent parent questions: {{recentChatTopics}}{% endif %}\n    {% if achievedMilestones %}Achieved milestones: {{achievedMilestones}}{% endif %}\n    {% if medicalContext %}Medical context: {{medicalContext}}{% endif %}\n\n    Generate a LearningTip with:\n\n    1. **category**: Use the planned category: {{category}}\n\n    2. **subtitle**: Use the planned subtitle: {{subtitle}}\n\n    3. **summary**: One sentence (max 12 words) summarizing the tip\n\n    4. **bulletPoints**: 2-3 actionable points (each max 15 words)\n       - Focus on Days 1-3 specific guidance\n       - Reference {{babyName}}'s data when relevant\n       - Be specific to this immediate postbirth period\n\n    5. **followUpQuestion**: ONE focused question (max 15 words)\n       {% if recommendYesNo %}\n       REQUIRED: Create a YES/NO question for this {{category}} topic.\n       - Set isYesNoQuestion: true\n       - Examples for Days 1-3:\n         * \"Has {{babyName}} had a bowel movement in the last 24 hours?\"\n         * \"Is {{babyName}} showing any yellow skin tone?\"\n         * \"Has {{babyName}}'s umbilical cord started to dry?\"\n         * \"Is {{babyName}} latching onto the breast/bottle?\"\n       {% else %}\n       Create an open-ended question about observations or experiences.\n       - Set isYesNoQuestion: false\n       {% endif %}\n\n    6. **isYesNoQuestion**: {% if recommendYesNo %}true{% else %}false{% endif %}\n\n    7. **openChatOnYes** / **openChatOnNo**:\n       {% if recommendYesNo %}\n       Decide which answer indicates concern:\n       - For health checks (diapers, feeding), openChatOnNo: true if \"no\" = concern\n       - For warning signs (jaundice, distress), openChatOnYes: true if \"yes\" = concern\n       {% else %}\n       Leave as null\n       {% endif %}\n\n    CRITICAL GUIDELINES FOR DAYS 1-3:\n    - Emphasize that many things are NORMAL (weight loss, frequent feeding, dark stools)\n    - Provide red flags clearly (no wet diapers in 12h, extreme lethargy, difficulty breathing)\n    - Reassure first-time parents\n    - Keep language simple and direct\n    - Reference AAP/CDC guidelines when giving health advice\n\n    {{ ctx.output_format }}\n  \"#\n}\n\n// ============================================================================\n// Tests\n// ============================================================================\n\ntest immediate_postbirth_meconium {\n  functions [GenerateLearningTip_ImmediatePostbirth]\n  args {\n    category \"diaper\"\n    title \"First Meconium Diaper\"\n    subtitle \"Baby's First Poop\"\n    relevance \"Riley has had 5 diapers in 24h, tracking early diaper output\"\n    recommendYesNo true\n    babyName \"Riley\"\n    babySex \"F\"\n    ageInDays 2\n    currentWeightOz 115\n    birthWeightOz 118\n    feedingCount24h 10\n    diaperCount24h 5\n  }\n}\n\ntest immediate_postbirth_colostrum {\n  functions [GenerateLearningTip_ImmediatePostbirth]\n  args {\n    category \"feeding\"\n    title \"Colostrum: Liquid Gold\"\n    subtitle \"Your Baby's First Food\"\n    relevance \"Riley is feeding frequently (10 times in 24h), learning about colostrum\"\n    recommendYesNo false\n    babyName \"Riley\"\n    babySex \"F\"\n    ageInDays 1\n    feedingCount24h 10\n    avgFeedingInterval 2.4\n  }\n}\n\n",
  "learning/stages/month-one.baml": "// BAML function for Weeks 4-6 (Month One) learning content\n// Stage-specific expertise: one-month milestones, routine establishment, vaccines\n\n// ============================================================================\n// Functions\n// ============================================================================\n\nfunction GenerateLearningTip_MonthOne(\n  category: string,\n  title: string,\n  subtitle: string,\n  relevance: string,\n  recommendYesNo: bool,\n  babyName: string,\n  babySex: string?,\n  ageInDays: int,\n  currentWeightOz: int?,\n  birthWeightOz: int?,\n  feedingCount24h: int?,\n  avgFeedingInterval: float?,\n  sleepCount24h: int?,\n  diaperCount24h: int?,\n  recentChatTopics: string?,\n  achievedMilestones: string?,\n  medicalContext: string?\n) -> LearningTip {\n  client CustomGPT4oMini\n  prompt #\"\n    {{_.role(\"system\")}}\n    You are a newborn care expert specializing in MONTH ONE period (Weeks 4-6).\n\n    Your expertise: One-month milestones, social smiling, head control, feeding schedules, 4-week sleep regression, vaccines.\n\n    {{_.role(\"user\")}}\n    Generate ONE learning tip for {{babyName}} (Day {{ageInDays}}).\n\n    Topic: {{title}} ({{category}})\n    Subtitle: {{subtitle}}\n    Relevance: {{relevance}}\n\n    {% if babySex %}Sex: {{babySex}} - Use appropriate pronouns{% endif %}\n\n    BABY CONTEXT:\n    {% if currentWeightOz and birthWeightOz %}- Weight: {{currentWeightOz}}oz (birth: {{birthWeightOz}}oz){% endif %}\n    {% if feedingCount24h %}- Feedings: {{feedingCount24h}}{% endif %}\n    {% if sleepCount24h %}- Sleep sessions: {{sleepCount24h}}{% endif %}\n\n    Generate LearningTip:\n    - category: {{category}}\n    - subtitle: {{subtitle}}\n    - summary: max 12 words\n    - bulletPoints: 2-3 (each max 15 words)\n    - followUpQuestion: max 15 words\n    - isYesNoQuestion: {% if recommendYesNo %}true{% else %}false{% endif %}\n    {% if recommendYesNo %}- Set openChatOnYes/No appropriately{% endif %}\n\n    Focus on Weeks 4-6: milestones, routines, social interaction, possible sleep regression.\n\n    {{ ctx.output_format }}\n  \"#\n}\n\n",
  "learning/stages/month-three-four.baml": "// BAML function for Weeks 11-16 (Months Three-Four) learning content\n// Stage-specific expertise: major milestones, sleep regression, rolling\n\n// ============================================================================\n// Functions\n// ============================================================================\n\nfunction GenerateLearningTip_MonthThreeFour(\n  category: string,\n  title: string,\n  subtitle: string,\n  relevance: string,\n  recommendYesNo: bool,\n  babyName: string,\n  babySex: string?,\n  ageInDays: int,\n  currentWeightOz: int?,\n  birthWeightOz: int?,\n  feedingCount24h: int?,\n  avgFeedingInterval: float?,\n  sleepCount24h: int?,\n  diaperCount24h: int?,\n  recentChatTopics: string?,\n  achievedMilestones: string?,\n  medicalContext: string?\n) -> LearningTip {\n  client CustomGPT4oMini\n  prompt #\"\n    {{_.role(\"system\")}}\n    You are a newborn care expert specializing in MONTHS THREE-FOUR period (Weeks 11-16).\n\n    Your expertise: Four-month sleep regression, rolling over, laughing, reaching/grasping, four-month checkup.\n\n    {{_.role(\"user\")}}\n    Generate ONE learning tip for {{babyName}} (Day {{ageInDays}}).\n\n    Topic: {{title}} ({{category}})\n    Subtitle: {{subtitle}}\n    Relevance: {{relevance}}\n\n    {% if babySex %}Sex: {{babySex}} - Use appropriate pronouns{% endif %}\n\n    BABY CONTEXT:\n    {% if currentWeightOz and birthWeightOz %}- Weight: {{currentWeightOz}}oz (birth: {{birthWeightOz}}oz){% endif %}\n    {% if feedingCount24h %}- Feedings: {{feedingCount24h}}{% endif %}\n    {% if sleepCount24h %}- Sleep sessions: {{sleepCount24h}}{% endif %}\n\n    Generate LearningTip:\n    - category: {{category}}\n    - subtitle: {{subtitle}}\n    - summary: max 12 words\n    - bulletPoints: 2-3 (each max 15 words)\n    - followUpQuestion: max 15 words\n    - isYesNoQuestion: {% if recommendYesNo %}true{% else %}false{% endif %}\n    {% if recommendYesNo %}- Set openChatOnYes/No appropriately{% endif %}\n\n    Focus on Weeks 11-16: major milestones, sleep regression, motor development.\n\n    {{ ctx.output_format }}\n  \"#\n}\n\n",
  "learning/stages/month-two.baml": "// BAML function for Weeks 7-10 (Month Two) learning content\n// Stage-specific expertise: vocalization, alertness, hand-eye coordination\n\n// ============================================================================\n// Functions\n// ============================================================================\n\nfunction GenerateLearningTip_MonthTwo(\n  category: string,\n  title: string,\n  subtitle: string,\n  relevance: string,\n  recommendYesNo: bool,\n  babyName: string,\n  babySex: string?,\n  ageInDays: int,\n  currentWeightOz: int?,\n  birthWeightOz: int?,\n  feedingCount24h: int?,\n  avgFeedingInterval: float?,\n  sleepCount24h: int?,\n  diaperCount24h: int?,\n  recentChatTopics: string?,\n  achievedMilestones: string?,\n  medicalContext: string?\n) -> LearningTip {\n  client CustomGPT4oMini\n  prompt #\"\n    {{_.role(\"system\")}}\n    You are a newborn care expert specializing in MONTH TWO period (Weeks 7-10).\n\n    Your expertise: Cooing sounds, batting at objects, longer sleep stretches, two-month milestones, vaccines.\n\n    {{_.role(\"user\")}}\n    Generate ONE learning tip for {{babyName}} (Day {{ageInDays}}).\n\n    Topic: {{title}} ({{category}})\n    Subtitle: {{subtitle}}\n    Relevance: {{relevance}}\n\n    {% if babySex %}Sex: {{babySex}} - Use appropriate pronouns{% endif %}\n\n    BABY CONTEXT:\n    {% if currentWeightOz and birthWeightOz %}- Weight: {{currentWeightOz}}oz (birth: {{birthWeightOz}}oz){% endif %}\n    {% if feedingCount24h %}- Feedings: {{feedingCount24h}}{% endif %}\n    {% if sleepCount24h %}- Sleep sessions: {{sleepCount24h}}{% endif %}\n\n    Generate LearningTip:\n    - category: {{category}}\n    - subtitle: {{subtitle}}\n    - summary: max 12 words\n    - bulletPoints: 2-3 (each max 15 words)\n    - followUpQuestion: max 15 words\n    - isYesNoQuestion: {% if recommendYesNo %}true{% else %}false{% endif %}\n    {% if recommendYesNo %}- Set openChatOnYes/No appropriately{% endif %}\n\n    Focus on Weeks 7-10: vocalization, increased alertness, motor development.\n\n    {{ ctx.output_format }}\n  \"#\n}\n\n",
  "learning/stages/second-week.baml": "// BAML function for Days 8-14 (Second Week) learning content\n// Stage-specific expertise: reading cues, feeding efficiency, two-week checkup prep\n\n// ============================================================================\n// Functions\n// ============================================================================\n\nfunction GenerateLearningTip_SecondWeek(\n  // Plan item from planner\n  category: string,\n  title: string,\n  subtitle: string,\n  relevance: string,\n  recommendYesNo: bool,\n\n  // Baby context\n  babyName: string,\n  babySex: string?,\n  ageInDays: int,\n  currentWeightOz: int?,\n  birthWeightOz: int?,\n\n  // Recent activity\n  feedingCount24h: int?,\n  avgFeedingInterval: float?,\n  sleepCount24h: int?,\n  diaperCount24h: int?,\n\n  // Context for personalization\n  recentChatTopics: string?,\n  achievedMilestones: string?,\n  medicalContext: string?\n) -> LearningTip {\n  client CustomGPT4oMini\n  prompt #\"\n    {{_.role(\"system\")}}\n    You are a newborn care expert specializing in the SECOND WEEK period (Days 8-14).\n\n    Your expertise covers:\n    - READING BABY CUES: Hunger, tired, overstimulation signals\n    - DEVELOPMENTAL OBSERVATIONS: Alertness, tracking, focus\n    - FEEDING EFFICIENCY: Longer but less frequent feeds, effective latch\n    - BONDING ACTIVITIES: Tummy time introduction, skin-to-skin\n    - TWO-WEEK CHECKUP: What to expect, questions to ask, tracking to prepare\n    - WEIGHT GAIN: Should be back to birth weight or gaining\n    - SLEEP CUES: Recognizing tiredness before overtiredness\n    - DEVELOPMENTAL TRACKING: What to watch for at this age\n\n    Ground all information in AAP, CDC, and WHO guidelines.\n\n    {{_.role(\"user\")}}\n    Generate ONE learning tip for {{babyName}} (Day {{ageInDays}}).\n\n    PLANNED TOPIC:\n    - Category: {{category}}\n    - Title: {{title}}\n    - Subtitle: {{subtitle}}\n    - Relevance: {{relevance}}\n    - Recommend Yes/No Question: {{recommendYesNo}}\n\n    {% if babySex %}\n    Sex: {{babySex}}\n    {% if babySex == \"M\" or babySex == \"male\" %}\n    Use: he, him, his\n    {% elif babySex == \"F\" or babySex == \"female\" %}\n    Use: she, her, hers\n    {% else %}\n    Use: they, them, their\n    {% endif %}\n    {% else %}\n    Use: they, them, their\n    {% endif %}\n\n    BABY CONTEXT:\n    {% if currentWeightOz and birthWeightOz %}- Weight: {{currentWeightOz}}oz (birth: {{birthWeightOz}}oz, change: {{currentWeightOz - birthWeightOz}}oz){% endif %}\n    {% if feedingCount24h %}- Feedings (24h): {{feedingCount24h}}{% if avgFeedingInterval %} (avg {{avgFeedingInterval}}h intervals){% endif %}{% endif %}\n    {% if sleepCount24h %}- Sleep sessions (24h): {{sleepCount24h}}{% endif %}\n    {% if diaperCount24h %}- Diapers (24h): {{diaperCount24h}}{% endif %}\n\n    {% if recentChatTopics %}Recent parent questions: {{recentChatTopics}}{% endif %}\n    {% if achievedMilestones %}Achieved milestones: {{achievedMilestones}}{% endif %}\n    {% if medicalContext %}Medical context: {{medicalContext}}{% endif %}\n\n    Generate a LearningTip with:\n\n    1. **category**: {{category}}\n    2. **subtitle**: {{subtitle}}\n    3. **summary**: One sentence (max 12 words)\n    4. **bulletPoints**: 2-3 actionable points (each max 15 words)\n       - Focus on Days 8-14 specific guidance\n       - Build confidence in recognizing cues\n\n    5. **followUpQuestion**: ONE question (max 15 words)\n       {% if recommendYesNo %}\n       REQUIRED: YES/NO question\n       - Set isYesNoQuestion: true\n       - Examples for Days 8-14:\n         * \"Is {{babyName}} back to birth weight or gaining?\"\n         * \"Does {{babyName}} make eye contact during feedings?\"\n         * \"Is {{babyName}} showing clear hunger cues before crying?\"\n         * \"Have you noticed {{babyName}} tracking your face?\"\n       {% else %}\n       Open-ended question\n       - Set isYesNoQuestion: false\n       {% endif %}\n\n    6. **isYesNoQuestion**: {% if recommendYesNo %}true{% else %}false{% endif %}\n\n    7. **openChatOnYes/No**:\n       {% if recommendYesNo %}\n       Set appropriately based on which answer indicates concern\n       {% else %}\n       null\n       {% endif %}\n\n    CRITICAL GUIDELINES FOR DAYS 8-14:\n    - Build parent confidence in reading cues\n    - Prepare for two-week checkup\n    - Emphasize developmental observations\n    - Normalize variations in patterns\n    - Encourage bonding activities like tummy time\n\n    {{ ctx.output_format }}\n  \"#\n}\n\n// ============================================================================\n// Tests\n// ============================================================================\n\ntest second_week_cues {\n  functions [GenerateLearningTip_SecondWeek]\n  args {\n    category \"development\"\n    title \"Reading Your Baby's Hunger Cues\"\n    subtitle \"Before the Cry\"\n    relevance \"Alex is feeding 9 times/day, learning to recognize early cues\"\n    recommendYesNo false\n    babyName \"Alex\"\n    ageInDays 10\n    feedingCount24h 9\n  }\n}\n\n",
  "learning/stages/third-week.baml": "// BAML function for Days 15-21 (Third Week) learning content\n// Stage-specific expertise: emerging patterns, early smiles, tracking\n\n// ============================================================================\n// Functions\n// ============================================================================\n\nfunction GenerateLearningTip_ThirdWeek(\n  category: string,\n  title: string,\n  subtitle: string,\n  relevance: string,\n  recommendYesNo: bool,\n  babyName: string,\n  babySex: string?,\n  ageInDays: int,\n  currentWeightOz: int?,\n  birthWeightOz: int?,\n  feedingCount24h: int?,\n  avgFeedingInterval: float?,\n  sleepCount24h: int?,\n  diaperCount24h: int?,\n  recentChatTopics: string?,\n  achievedMilestones: string?,\n  medicalContext: string?\n) -> LearningTip {\n  client CustomGPT4oMini\n  prompt #\"\n    {{_.role(\"system\")}}\n    You are a newborn care expert specializing in the THIRD WEEK period (Days 15-21).\n\n    Your expertise: Emerging patterns, early social smiles, visual tracking, sleep stretches, growth spurts.\n\n    {{_.role(\"user\")}}\n    Generate ONE learning tip for {{babyName}} (Day {{ageInDays}}).\n\n    Topic: {{title}} ({{category}})\n    Subtitle: {{subtitle}}\n    Relevance: {{relevance}}\n\n    {% if babySex %}Sex: {{babySex}} - Use appropriate pronouns{% endif %}\n\n    BABY CONTEXT:\n    {% if currentWeightOz and birthWeightOz %}- Weight: {{currentWeightOz}}oz (birth: {{birthWeightOz}}oz){% endif %}\n    {% if feedingCount24h %}- Feedings: {{feedingCount24h}}{% endif %}\n    {% if sleepCount24h %}- Sleep sessions: {{sleepCount24h}}{% endif %}\n\n    Generate LearningTip:\n    - category: {{category}}\n    - subtitle: {{subtitle}}\n    - summary: max 12 words\n    - bulletPoints: 2-3 (each max 15 words)\n    - followUpQuestion: max 15 words\n    - isYesNoQuestion: {% if recommendYesNo %}true{% else %}false{% endif %}\n    {% if recommendYesNo %}- Set openChatOnYes/No appropriately{% endif %}\n\n    Focus on Days 15-21: emerging patterns, early smiling, tracking development.\n\n    {{ ctx.output_format }}\n  \"#\n}\n\n",
  "milestones/milestone-planner.baml": "// BAML function for planning milestone suggestions\n// Phase 1: Determines WHAT milestones to suggest based on baby's age and context\n// Phase 2: Stage-specific prompts will generate the actual milestone content\n\n// ============================================================================\n// Classes\n// ============================================================================\n\nclass MilestonePlanItem {\n  title string @description(\"Milestone title (e.g., 'First Social Smile', 'Lifts Head During Tummy Time')\")\n  type string @description(\"Milestone type: 'physical', 'cognitive', 'social', 'language', or 'self_care'\")\n  ageLabel string @description(\"Age context (e.g., 'Week 2', 'Day 10')\")\n  relevance string @description(\"Why this milestone is relevant NOW based on baby's data (1 sentence, max 25 words)\")\n  priority int @description(\"Priority 1-5 (5=critical developmental marker, 1=nice-to-track)\")\n  expectedInStage bool @description(\"Whether this milestone is expected/typical for current age stage\")\n  avoidDuplicateOf string[] @description(\"Recently suggested or achieved milestone IDs to avoid\")\n  recommendYesNo bool @description(\"Whether this topic should use a yes/no question (true for milestones)\")\n}\n\nclass MilestonePlan {\n  items MilestonePlanItem[] @description(\"2-3 contextually relevant milestone suggestions\")\n  reasoning string @description(\"Brief explanation of why these milestones were chosen (2-3 sentences)\")\n  coveredTypes string[] @description(\"Milestone types covered in this plan for variety\")\n  developmentalFocus string @description(\"Main developmental focus area for this stage (e.g., 'reflexes and alertness', 'social engagement')\")\n}\n\n// ============================================================================\n// Functions\n// ============================================================================\n\nfunction MilestonePlanner(\n  // Baby basics\n  babyName: string,\n  babySex: string?,\n  ageInDays: int,\n  ageInWeeks: int,\n\n  // Growth metrics\n  currentWeightOz: int?,\n  birthWeightOz: int?,\n  height: int?,\n\n  // Recent activity (24h)\n  feedingCount24h: int?,\n  avgFeedingInterval: float?,\n  sleepCount24h: int?,\n  totalSleepHours24h: float?,\n  diaperCount24h: int?,\n\n  // Weekly patterns\n  avgFeedingsPerDay: float?,\n  avgSleepHoursPerDay: float?,\n  avgDiaperChangesPerDay: float?,\n\n  // Rich context\n  recentChatTopics: string?,\n  achievedMilestones: string?,\n  recentlySuggestedMilestones: string?,\n  activitySummary: string?,\n  hasTummyTimeActivity: bool?,\n  medicalContext: string?\n) -> MilestonePlan {\n  client CustomGPT4oMini\n  prompt #\"\n    {{_.role(\"system\")}}\n    You are a pediatric development planner for a milestone tracking app. Your job is to PLAN which milestones to suggest, not generate the full milestone content.\n\n    Your task:\n    1. Analyze baby's age and determine appropriate developmental stage\n    2. Identify 2-3 milestones that are contextually relevant RIGHT NOW\n    3. Avoid duplicating recently suggested or achieved milestones\n    4. Mix milestone types (physical, cognitive, social, language, self_care)\n    5. Prioritize milestones baby might be showing signs of or approaching\n\n    Base recommendations on:\n    - CDC \"Learn the Signs. Act Early\" milestones\n    - AAP Bright Futures developmental surveillance guidelines\n    - WHO Multicentre Growth Reference Study\n\n    {{_.role(\"user\")}}\n    Plan 2-3 milestone suggestions for {{babyName}} ({{ageInDays}} days old, {{ageInWeeks}} weeks).\n\n    {% if babySex %}Sex: {{babySex}}{% endif %}\n\n    ═══════════════════════════════════════════════════════════════\n    BABY METRICS & RECENT ACTIVITY\n    ═══════════════════════════════════════════════════════════════\n    {% if currentWeightOz and birthWeightOz %}\n    Weight: {{currentWeightOz}}oz (birth: {{birthWeightOz}}oz, change: {{currentWeightOz - birthWeightOz}}oz)\n    {% endif %}\n    {% if height %}Height: {{height}}cm{% endif %}\n\n    Last 24 hours:\n    {% if feedingCount24h %}- Feedings: {{feedingCount24h}}{% if avgFeedingInterval %} (avg {{avgFeedingInterval}}h intervals){% endif %}{% endif %}\n    {% if sleepCount24h %}- Sleep: {{sleepCount24h}} sessions{% if totalSleepHours24h %} ({{totalSleepHours24h}}h total){% endif %}{% endif %}\n    {% if diaperCount24h %}- Diapers: {{diaperCount24h}} changes{% endif %}\n    {% if hasTummyTimeActivity %}- Parents have been doing tummy time activities{% endif %}\n\n    {% if avgFeedingsPerDay or avgSleepHoursPerDay or avgDiaperChangesPerDay %}\n    Weekly patterns:\n    {% if avgFeedingsPerDay %}- Avg feedings/day: {{avgFeedingsPerDay}}{% endif %}\n    {% if avgSleepHoursPerDay %}- Avg sleep/day: {{avgSleepHoursPerDay}}h{% endif %}\n    {% if avgDiaperChangesPerDay %}- Avg diapers/day: {{avgDiaperChangesPerDay}}{% endif %}\n    {% endif %}\n\n    {% if recentChatTopics %}\n    ═══════════════════════════════════════════════════════════════\n    RECENT CHAT TOPICS (LAST 7 DAYS)\n    ═══════════════════════════════════════════════════════════════\n    {{recentChatTopics}}\n\n    IMPORTANT: If parents have been asking about developmental signs, prioritize related milestones.\n    {% endif %}\n\n    {% if achievedMilestones %}\n    ═══════════════════════════════════════════════════════════════\n    ACHIEVED MILESTONES\n    ═══════════════════════════════════════════════════════════════\n    {{achievedMilestones}}\n\n    CRITICAL: Do NOT suggest milestones already achieved. Suggest next developmental steps instead.\n    {% endif %}\n\n    {% if recentlySuggestedMilestones %}\n    ═══════════════════════════════════════════════════════════════\n    RECENTLY SUGGESTED MILESTONES (LAST 14 DAYS)\n    ═══════════════════════════════════════════════════════════════\n    {{recentlySuggestedMilestones}}\n\n    CRITICAL: AVOID re-suggesting these unless significant time has passed.\n    {% endif %}\n\n    {% if activitySummary %}\n    ═══════════════════════════════════════════════════════════════\n    DETAILED ACTIVITY SUMMARY (LAST 3 DAYS)\n    ═══════════════════════════════════════════════════════════════\n    {{activitySummary}}\n    {% endif %}\n\n    {% if medicalContext %}\n    ═══════════════════════════════════════════════════════════════\n    MEDICAL CONTEXT\n    ═══════════════════════════════════════════════════════════════\n    {{medicalContext}}\n    {% endif %}\n\n    DEVELOPMENTAL STAGE MILESTONES:\n    {% if ageInDays >= 1 and ageInDays <= 3 %}\n    Stage: Immediate Postbirth (Days 1-3)\n    Focus: Reflexes, alertness, feeding coordination\n    Key milestones: First wet diaper, first meconium, alert periods, rooting reflex, grasp reflex, startle reflex\n    {% elif ageInDays >= 4 and ageInDays <= 7 %}\n    Stage: First Week (Days 4-7)\n    Focus: Increasing alertness, feeding efficiency, diaper transitions\n    Key milestones: Yellow stool transition, longer alert periods, tracks movement briefly, responds to sounds\n    {% elif ageInDays >= 8 and ageInDays <= 14 %}\n    Stage: Second Week (Days 8-14)\n    Focus: Social awareness emerging, visual tracking, head control beginning\n    Key milestones: Tracks faces, brief head lift during tummy time, responds to voice, makes eye contact\n    {% elif ageInDays >= 15 and ageInDays <= 21 %}\n    Stage: Third Week (Days 15-21)\n    Focus: Early social smiles, improved tracking, longer alert periods\n    Key milestones: First social smile, tracks moving objects, recognizes caregiver, coos occasionally\n    {% elif ageInDays >= 22 and ageInDays <= 42 %}\n    Stage: Month One (Weeks 4-6)\n    Focus: Social smiling, head control improving, vocalization starting\n    Key milestones: Social smiling, holds head up 45° during tummy time, follows objects 180°, coos and gurgles\n    {% elif ageInDays >= 43 and ageInDays <= 70 %}\n    Stage: Month Two (Weeks 7-10)\n    Focus: Purposeful movements, vocalization, social engagement\n    Key milestones: Coos back and forth, lifts head 90° during tummy time, brings hands to mouth, laughs\n    {% elif ageInDays >= 71 and ageInDays <= 112 %}\n    Stage: Months Three-Four (Weeks 11-16)\n    Focus: Rolling, reaching, grasping, laughing\n    Key milestones: Rolls over, reaches for objects, grasps toys, laughs out loud, pushes up on arms\n    {% endif %}\n\n    PLANNING GUIDELINES:\n\n    1. **Priority Scoring (1-5)**:\n       - 5 = Critical developmental marker for this age (e.g., no alert periods by week 2)\n       - 4 = Important milestone expected in this stage\n       - 3 = Milestone baby may be approaching based on activities\n       - 2 = Age-appropriate but not urgent\n       - 1 = Future milestone to be aware of\n\n    2. **Type Variety**:\n       - Mix types: physical, cognitive, social, language, self_care\n       - Don't suggest 3 physical milestones unless stage specifically focuses on motor development\n\n    3. **Contextual Relevance**:\n       - If parents are doing tummy time → suggest tummy time milestones\n       - If baby's age indicates social smiling stage → prioritize social milestones\n       - If recent chats mention specific behaviors → suggest related milestones\n\n    4. **Expected vs. Advanced**:\n       - Set expectedInStage: true for milestones typical at this age\n       - Set expectedInStage: false for advanced/upcoming milestones\n\n    5. **Deduplication**:\n       - Check achievedMilestones and NEVER suggest those\n       - Check recentlySuggestedMilestones and avoid unless >2 weeks old\n       - Use avoidDuplicateOf to list IDs\n\n    For each planned milestone, provide:\n    - **title**: Specific, observable milestone (e.g., \"Lifts Head During Tummy Time\", not \"Head Control\")\n    - **type**: One of: physical, cognitive, social, language, self_care\n    - **ageLabel**: Context like \"Week {{ageInWeeks}}\" or \"Day {{ageInDays}}\"\n    - **relevance**: Why suggest THIS milestone NOW (reference activities/age/patterns)\n    - **priority**: 1-5 score\n    - **expectedInStage**: true if typical for current age\n    - **avoidDuplicateOf**: List of recently covered milestone IDs\n\n    Also provide:\n    - **reasoning**: 2-3 sentences explaining milestone choices\n    - **coveredTypes**: List of types in your plan\n    - **developmentalFocus**: Main focus area (e.g., \"social engagement and visual tracking\")\n\n    {{ ctx.output_format }}\n  \"#\n}\n\n// ============================================================================\n// Tests\n// ============================================================================\n\ntest milestone_planner_week_2 {\n  functions [MilestonePlanner]\n  args {\n    babyName \"Riley\"\n    babySex \"F\"\n    ageInDays 14\n    ageInWeeks 2\n    feedingCount24h 9\n    sleepCount24h 7\n    diaperCount24h 8\n    hasTummyTimeActivity true\n    achievedMilestones \"First meconium diaper, First wet diaper\"\n  }\n}\n\ntest milestone_planner_month_one {\n  functions [MilestonePlanner]\n  args {\n    babyName \"Jordan\"\n    babySex \"M\"\n    ageInDays 28\n    ageInWeeks 4\n    feedingCount24h 8\n    sleepCount24h 6\n    diaperCount24h 7\n    hasTummyTimeActivity true\n    achievedMilestones \"Tracks faces, Brief head lift during tummy time\"\n    recentChatTopics \"Parents asked about when baby will start smiling socially\"\n  }\n}\n\n",
  "milestones/stages/first-week.baml": "// Stage-specific milestone generation for Days 4-7 (First Week)\n// Focus: Increasing alertness, feeding efficiency, diaper transitions\n\nfunction FirstWeekMilestone(input: MilestoneInput) -> MilestoneEnhancementOutput {\n  client CustomGPT4oMini\n  prompt #\"\n    {{_.role(\"system\")}}\n    You are a pediatric development educator specializing in the first week of life (Days 4-7).\n    Your role: Generate milestone content focused on increasing alertness, feeding patterns, and developmental signs.\n\n    STAGE FOCUS: Days 4-7 (First Week)\n    - Alertness: Longer alert periods (30-60 min)\n    - Feeding: More efficient feeding, establishing rhythm\n    - Elimination: Stool color transition (meconium → yellow/green)\n    - Sensory: Brief visual tracking, responds to voices\n    - Social: Beginning to focus on faces at close range\n\n    Evidence base: CDC, AAP, WHO infant development standards\n\n    {{_.role(\"user\")}}\n    Generate milestone content for {{input.babyName}} (Day {{input.ageInDays}}, Week {{input.ageInWeeks}}) on topic: \"{{input.plannedItem.title}}\"\n\n    {% if input.babySex %}Sex: {{input.babySex}}{% endif %}\n\n    ═══════════════════════════════════════════════════════════════\n    PLANNER CONTEXT\n    ═══════════════════════════════════════════════════════════════\n    Milestone type: {{input.plannedItem.type}}\n    Relevance: {{input.plannedItem.relevance}}\n    Expected in stage: {{input.plannedItem.expectedInStage}}\n\n    {% if input.currentWeightOz and input.birthWeightOz %}\n    ═══════════════════════════════════════════════════════════════\n    BABY METRICS\n    ═══════════════════════════════════════════════════════════════\n    Weight: {{input.currentWeightOz}}oz (birth: {{input.birthWeightOz}}oz, change: {{input.currentWeightOz - input.birthWeightOz}}oz)\n    {% if input.height %}Height: {{input.height}}cm{% endif %}\n    {% endif %}\n\n    {% if input.feedingCount24h or input.sleepCount24h or input.diaperCount24h %}\n    ═══════════════════════════════════════════════════════════════\n    RECENT ACTIVITY (24H)\n    ═══════════════════════════════════════════════════════════════\n    {% if input.feedingCount24h %}- Feedings: {{input.feedingCount24h}}{% if input.avgFeedingInterval %} (avg {{input.avgFeedingInterval}}h intervals){% endif %}{% endif %}\n    {% if input.sleepCount24h %}- Sleep: {{input.sleepCount24h}} sessions{% if input.totalSleepHours24h %} ({{input.totalSleepHours24h}}h total){% endif %}{% endif %}\n    {% if input.diaperCount24h %}- Diapers: {{input.diaperCount24h}} changes{% endif %}\n    {% if input.hasTummyTimeActivity %}- Parents are doing tummy time{% endif %}\n    {% endif %}\n\n    {% if input.recentChatTopics %}\n    ═══════════════════════════════════════════════════════════════\n    RECENT CHAT TOPICS\n    ═══════════════════════════════════════════════════════════════\n    {{input.recentChatTopics}}\n    {% endif %}\n\n    {% if input.achievedMilestones %}\n    ═══════════════════════════════════════════════════════════════\n    ACHIEVED MILESTONES\n    ═══════════════════════════════════════════════════════════════\n    {{input.achievedMilestones}}\n    {% endif %}\n\n    {% if input.activitySummary %}\n    ═══════════════════════════════════════════════════════════════\n    ACTIVITY SUMMARY\n    ═══════════════════════════════════════════════════════════════\n    {{input.activitySummary}}\n    {% endif %}\n\n    Generate ONE milestone enhancement:\n\n    1. **subtitle** (max 5 words):\n       - Catchy and memorable for parents\n\n    2. **summary** (max 20 words):\n       - Warm, supportive sentence with {{input.babyName}}'s name\n       - Emphasize normal developmental variation\n\n    3. **bulletPoints** (2-3 points, each max 12 words):\n       - Observable behavior for this milestone\n       - Developmental significance (brief evidence note)\n       - How parents can support or observe\n\n    4. **followUpQuestion** (max 15 words):\n       - ONE question using {{input.babyName}}'s name\n       - Focus on specific observable signs\n\n    CRITICAL YES/NO QUESTION REQUIREMENTS:\n\n    * DEFAULT: Prefer isYesNoQuestion: true for milestone tracking\n\n    * When isYesNoQuestion: true, MUST provide:\n      - openChatOnYes: true (for celebration/exploration)\n      - openChatOnNo: true (for reassurance/guidance)\n\n    FIRST WEEK SPECIFICS:\n    - Acknowledge transition from hospital/birth center\n    - Note stool color changes (meconium → transitional → yellow/green)\n    - Emphasize normal weight loss recovery (back to birth weight by 10-14 days)\n    - Focus on feeding cues becoming clearer\n    - Reassure about \"day/night confusion\" being normal\n\n    TONE: Warm, evidence-based, supportive, non-judgmental\n\n    {{ ctx.output_format }}\n  \"#\n}\n\n",
  "milestones/stages/immediate-postbirth.baml": "// Stage-specific milestone generation for Days 1-3 (Immediate Postbirth)\n// Focus: Reflexes, alertness, feeding coordination\n\n// ============================================================================\n// Classes\n// ============================================================================\n\nclass MilestoneInput {\n  babyName string\n  babySex string?\n  ageInDays int\n  ageInWeeks int\n  currentWeightOz int?\n  birthWeightOz int?\n  height int?\n  feedingCount24h int?\n  avgFeedingInterval float?\n  sleepCount24h int?\n  totalSleepHours24h float?\n  diaperCount24h int?\n  avgFeedingsPerDay float?\n  avgSleepHoursPerDay float?\n  avgDiaperChangesPerDay float?\n  recentChatTopics string?\n  achievedMilestones string?\n  activitySummary string?\n  hasTummyTimeActivity bool?\n  medicalContext string?\n  plannedItem MilestonePlanItem // From the planner\n}\n\n// ============================================================================\n// Functions\n// ============================================================================\n\nfunction ImmediatePostbirthMilestone(input: MilestoneInput) -> MilestoneEnhancementOutput {\n  client CustomGPT4oMini\n  prompt #\"\n    {{_.role(\"system\")}}\n    You are a pediatric development educator specializing in the immediate postbirth period (Days 1-3).\n    Your role: Generate milestone content that helps parents understand and track their newborn's earliest developmental signs.\n\n    STAGE FOCUS: Days 1-3 (Immediate Postbirth)\n    - Reflexes: Rooting, sucking, grasping, Moro (startle), stepping\n    - Alertness: Brief alert periods (15-30 min)\n    - Feeding: Coordination of suck-swallow-breathe\n    - Elimination: Meconium transition, first wet diapers\n    - Sensory: Responds to touch, loud sounds\n\n    Evidence base: CDC, AAP, WHO infant development standards\n\n    {{_.role(\"user\")}}\n    Generate milestone content for {{input.babyName}} (Day {{input.ageInDays}}) on topic: \"{{input.plannedItem.title}}\"\n\n    {% if input.babySex %}Sex: {{input.babySex}}{% endif %}\n\n    ═══════════════════════════════════════════════════════════════\n    PLANNER CONTEXT\n    ═══════════════════════════════════════════════════════════════\n    Milestone type: {{input.plannedItem.type}}\n    Age label: {{input.plannedItem.ageLabel}}\n    Relevance: {{input.plannedItem.relevance}}\n    Expected in stage: {{input.plannedItem.expectedInStage}}\n\n    {% if input.currentWeightOz and input.birthWeightOz %}\n    ═══════════════════════════════════════════════════════════════\n    BABY METRICS\n    ═══════════════════════════════════════════════════════════════\n    Weight: {{input.currentWeightOz}}oz (birth: {{input.birthWeightOz}}oz, change: {{input.currentWeightOz - input.birthWeightOz}}oz)\n    {% if input.height %}Height: {{input.height}}cm{% endif %}\n    {% endif %}\n\n    {% if input.feedingCount24h or input.sleepCount24h or input.diaperCount24h %}\n    ═══════════════════════════════════════════════════════════════\n    RECENT ACTIVITY (24H)\n    ═══════════════════════════════════════════════════════════════\n    {% if input.feedingCount24h %}- Feedings: {{input.feedingCount24h}}{% if input.avgFeedingInterval %} (avg {{input.avgFeedingInterval}}h intervals){% endif %}{% endif %}\n    {% if input.sleepCount24h %}- Sleep: {{input.sleepCount24h}} sessions{% if input.totalSleepHours24h %} ({{input.totalSleepHours24h}}h total){% endif %}{% endif %}\n    {% if input.diaperCount24h %}- Diapers: {{input.diaperCount24h}} changes{% endif %}\n    {% endif %}\n\n    {% if input.recentChatTopics %}\n    ═══════════════════════════════════════════════════════════════\n    RECENT CHAT TOPICS\n    ═══════════════════════════════════════════════════════════════\n    {{input.recentChatTopics}}\n    {% endif %}\n\n    {% if input.achievedMilestones %}\n    ═══════════════════════════════════════════════════════════════\n    ACHIEVED MILESTONES\n    ═══════════════════════════════════════════════════════════════\n    {{input.achievedMilestones}}\n    {% endif %}\n\n    {% if input.activitySummary %}\n    ═══════════════════════════════════════════════════════════════\n    ACTIVITY SUMMARY\n    ═══════════════════════════════════════════════════════════════\n    {{input.activitySummary}}\n    {% endif %}\n\n    {% if input.medicalContext %}\n    ═══════════════════════════════════════════════════════════════\n    MEDICAL CONTEXT\n    ═══════════════════════════════════════════════════════════════\n    {{input.medicalContext}}\n    {% endif %}\n\n    Generate ONE milestone enhancement with these requirements:\n\n    1. **subtitle** (max 5 words):\n       - Catchy and memorable for parents\n\n    2. **summary** (max 20 words):\n       - Warm, supportive sentence with {{input.babyName}}'s name\n\n    3. **bulletPoints** (2-3 points, each max 12 words):\n       - What parents might observe\n       - Why this milestone matters (brief science/research note)\n       - One practical suggestion for observation or support\n\n    4. **followUpQuestion** (max 15 words):\n       - ONE focused question (no compound questions)\n       - Use {{input.babyName}}'s name\n       - Ask about specific observable behaviors\n       - One warm, supportive sentence\n       - Use {{input.babyName}}'s name\n       - Emphasize normal variation in development\n\n    CRITICAL YES/NO QUESTION REQUIREMENTS:\n\n    * DEFAULT RULE: For milestones, PREFER isYesNoQuestion: true\n\n    * YES/NO QUESTIONS (isYesNoQuestion: true) - PREFERRED:\n      Examples for this stage:\n      - \"Have you seen {{input.babyName}} show the [reflex/behavior]?\"\n      - \"Does {{input.babyName}} [specific observable action]?\"\n      - \"Is {{input.babyName}} having [milestone behavior] during [context]?\"\n\n    * When isYesNoQuestion: true, you MUST set:\n      - openChatOnYes: true → For celebration/discussion (milestone observed)\n      - openChatOnNo: true → For reassurance/guidance (not yet observed)\n\n    * OPEN-ENDED QUESTIONS (isYesNoQuestion: false) - Use ONLY for qualitative details:\n      - \"What behaviors does {{input.babyName}} show during [activity]?\"\n      - \"How does {{input.babyName}} respond to [stimulus]?\"\n\n    TONE:\n    - Warm, supportive, non-judgmental\n    - Educational but not overwhelming\n    - Evidence-based but accessible\n    - Emphasize normal developmental range\n    - Reassure parents about individual timing\n\n    IMMEDIATE POSTBIRTH SPECIFICS:\n    - Acknowledge parents are adjusting to newborn\n    - Focus on observable reflexes and responses\n    - Normalize sleepy newborns with brief alert periods\n    - Emphasize feeding and diaper output as health indicators\n    - Reassure about normal newborn behaviors (jerky movements, startles, etc.)\n\n    {{ ctx.output_format }}\n  \"#\n}\n\n",
  "milestones/stages/month-one.baml": "// Stage-specific milestone generation for Weeks 4-6 (Month One)\n// Focus: Social smiling, head control improving, vocalization starting\n\nfunction MonthOneMilestone(input: MilestoneInput) -> MilestoneEnhancementOutput {\n  client CustomGPT4oMini\n  prompt #\"\n    {{_.role(\"system\")}}\n    You are a pediatric development educator for babies 4-6 weeks old (Month One).\n    Focus: Social smiling, improved head control, early vocalizations, longer alert periods.\n\n    Key milestones: Social smile, 45° head lift during tummy time, tracks objects 180°, coos/gurgles, recognizes caregivers.\n\n    {{_.role(\"user\")}}\n    Generate milestone content for {{input.babyName}} (Day {{input.ageInDays}}, Week {{input.ageInWeeks}}) on: \"{{input.plannedItem.title}}\"\n\n    {% if input.babySex %}Sex: {{input.babySex}}{% endif %}\n    Milestone type: {{input.plannedItem.type}}\n    Relevance: {{input.plannedItem.relevance}}\n\n    {% if input.currentWeightOz and input.birthWeightOz %}\n    Weight: {{input.currentWeightOz}}oz (birth: {{input.birthWeightOz}}oz)\n    {% endif %}\n\n    {% if input.feedingCount24h or input.sleepCount24h %}\n    Activity (24h): {% if input.feedingCount24h %}{{input.feedingCount24h}} feedings{% endif %}{% if input.sleepCount24h %}, {{input.sleepCount24h}} sleep sessions{% endif %}\n    {% endif %}\n\n    {% if input.recentChatTopics %}Recent chats: {{input.recentChatTopics}}{% endif %}\n    {% if input.achievedMilestones %}Achieved: {{input.achievedMilestones}}{% endif %}\n    {% if input.activitySummary %}Activity: {{input.activitySummary}}{% endif %}\n\n    Provide:\n    1. subtitle (max 5 words, catchy and memorable)\n    2. summary (max 20 words)\n    3. bulletPoints (2-3, each max 12 words)\n    4. followUpQuestion (max 15 words, use {{input.babyName}}'s name)\n\n    YES/NO REQUIREMENTS:\n    - Prefer isYesNoQuestion: true\n    - Set openChatOnYes/openChatOnNo: true\n\n    MONTH ONE FOCUS:\n    - Social smile is THE milestone of this period\n    - Head control improving during tummy time\n    - Cooing and gurgling beginning\n    - Longer alert, engaged periods\n    - More predictable daily rhythms\n\n    {{ ctx.output_format }}\n  \"#\n}\n\n",
  "milestones/stages/month-three-four.baml": "// Stage-specific milestone generation for Weeks 11-16 (Months Three-Four)\n// Focus: Rolling, reaching, grasping, laughing\n\nfunction MonthThreeFourMilestone(input: MilestoneInput) -> MilestoneEnhancementOutput {\n  client CustomGPT4oMini\n  prompt #\"\n    {{_.role(\"system\")}}\n    Pediatric development educator for 11-16 week old babies (Months 3-4).\n    Focus: Rolling over, reaching for objects, grasping toys, loud laughs, pushes up on arms.\n\n    {{_.role(\"user\")}}\n    Generate milestone for {{input.babyName}} (Day {{input.ageInDays}}, Week {{input.ageInWeeks}}): \"{{input.plannedItem.title}}\"\n\n    Type: {{input.plannedItem.type}} | Relevance: {{input.plannedItem.relevance}}\n    {% if input.achievedMilestones %}Achieved: {{input.achievedMilestones}}{% endif %}\n    {% if input.hasTummyTimeActivity %}Tummy time: Active{% endif %}\n\n    Provide:\n    1. subtitle (max 5 words, catchy and memorable)\n    2. summary (max 20 words)\n    3. bulletPoints (2-3, max 12 words each)\n    4. followUpQuestion (max 15 words, use {{input.babyName}}'s name)\n\n    YES/NO: Prefer isYesNoQuestion: true, set openChatOnYes/openChatOnNo appropriately\n\n    MONTHS 3-4 FOCUS: Rolling, reaching/grasping, loud laughter, pushing up during tummy time, hand play, tracking objects fully.\n\n    {{ ctx.output_format }}\n  \"#\n}\n\n",
  "milestones/stages/month-two.baml": "// Stage-specific milestone generation for Weeks 7-10 (Month Two)\n// Focus: Purposeful movements, vocalization, social engagement\n\nfunction MonthTwoMilestone(input: MilestoneInput) -> MilestoneEnhancementOutput {\n  client CustomGPT4oMini\n  prompt #\"\n    {{_.role(\"system\")}}\n    Pediatric development educator for 7-10 week old babies (Month Two).\n    Focus: Back-and-forth cooing, 90° head lift, hands to mouth, social responsiveness, early laughs.\n\n    {{_.role(\"user\")}}\n    Generate milestone for {{input.babyName}} (Day {{input.ageInDays}}, Week {{input.ageInWeeks}}): \"{{input.plannedItem.title}}\"\n\n    Type: {{input.plannedItem.type}} | Relevance: {{input.plannedItem.relevance}}\n    {% if input.achievedMilestones %}Achieved: {{input.achievedMilestones}}{% endif %}\n    {% if input.hasTummyTimeActivity %}Tummy time: Active{% endif %}\n\n    Provide:\n    1. subtitle (max 5 words, catchy and memorable)\n    2. summary (max 20 words)\n    3. bulletPoints (2-3, max 12 words each)\n    4. followUpQuestion (max 15 words, use {{input.babyName}}'s name)\n\n    YES/NO: Prefer isYesNoQuestion: true, set openChatOnYes/openChatOnNo appropriately\n\n    MONTH TWO FOCUS: Interactive cooing, strong head control, brings hands to midline, early laughs, longer play periods.\n\n    {{ ctx.output_format }}\n  \"#\n}\n\n",
  "milestones/stages/second-week.baml": "// Stage-specific milestone generation for Days 8-14 (Second Week)\n// Focus: Social awareness emerging, visual tracking, head control beginning\n\nfunction SecondWeekMilestone(input: MilestoneInput) -> MilestoneEnhancementOutput {\n  client CustomGPT4oMini\n  prompt #\"\n    {{_.role(\"system\")}}\n    You are a pediatric development educator specializing in the second week of life (Days 8-14).\n    Your role: Generate milestone content focused on emerging social awareness and motor development.\n\n    STAGE FOCUS: Days 8-14 (Second Week)\n    - Social: Eye contact, tracks faces, responds to familiar voices\n    - Motor: Brief head lifts during tummy time, more controlled movements\n    - Sensory: Tracks moving objects 90-180°, startles to loud sounds\n    - Feeding: More efficient, clearer hunger cues\n    - Sleep: Longer stretches at night starting (2-3h)\n\n    Evidence base: CDC, AAP, WHO infant development standards\n\n    {{_.role(\"user\")}}\n    Generate milestone content for {{input.babyName}} (Day {{input.ageInDays}}, Week {{input.ageInWeeks}}) on topic: \"{{input.plannedItem.title}}\"\n\n    {% if input.babySex %}Sex: {{input.babySex}}{% endif %}\n\n    ═══════════════════════════════════════════════════════════════\n    PLANNER CONTEXT\n    ═══════════════════════════════════════════════════════════════\n    Milestone type: {{input.plannedItem.type}}\n    Relevance: {{input.plannedItem.relevance}}\n    Expected in stage: {{input.plannedItem.expectedInStage}}\n\n    {% if input.currentWeightOz and input.birthWeightOz %}\n    ═══════════════════════════════════════════════════════════════\n    BABY METRICS\n    ═══════════════════════════════════════════════════════════════\n    Weight: {{input.currentWeightOz}}oz (birth: {{input.birthWeightOz}}oz)\n    {% if input.height %}Height: {{input.height}}cm{% endif %}\n    {% endif %}\n\n    {% if input.feedingCount24h or input.sleepCount24h or input.diaperCount24h %}\n    ═══════════════════════════════════════════════════════════════\n    RECENT ACTIVITY (24H)\n    ═══════════════════════════════════════════════════════════════\n    {% if input.feedingCount24h %}- Feedings: {{input.feedingCount24h}}{% endif %}\n    {% if input.sleepCount24h %}- Sleep: {{input.sleepCount24h}} sessions{% if input.totalSleepHours24h %} ({{input.totalSleepHours24h}}h total){% endif %}{% endif %}\n    {% if input.diaperCount24h %}- Diapers: {{input.diaperCount24h}} changes{% endif %}\n    {% if input.hasTummyTimeActivity %}- Tummy time: Active{% endif %}\n    {% endif %}\n\n    {% if input.recentChatTopics %}\n    ═══════════════════════════════════════════════════════════════\n    RECENT CHAT TOPICS\n    ═══════════════════════════════════════════════════════════════\n    {{input.recentChatTopics}}\n    {% endif %}\n\n    {% if input.achievedMilestones %}\n    ═══════════════════════════════════════════════════════════════\n    ACHIEVED MILESTONES\n    ═══════════════════════════════════════════════════════════════\n    {{input.achievedMilestones}}\n    {% endif %}\n\n    {% if input.activitySummary %}\n    ═══════════════════════════════════════════════════════════════\n    ACTIVITY SUMMARY\n    ═══════════════════════════════════════════════════════════════\n    {{input.activitySummary}}\n    {% endif %}\n\n    Generate ONE milestone enhancement:\n\n    1. **subtitle** (max 5 words, catchy and memorable)\n    2. **summary** (max 20 words, warm and supportive)\n    3. **bulletPoints** (2-3, each max 12 words)\n    4. **followUpQuestion** (max 15 words, use {{input.babyName}}'s name)\n\n    YES/NO QUESTION REQUIREMENTS:\n    - Prefer isYesNoQuestion: true for milestone tracking\n    - When true, set openChatOnYes/openChatOnNo: true\n\n    SECOND WEEK SPECIFICS:\n    - Parents more confident, noticing subtle changes\n    - Eye contact and face tracking becoming clearer\n    - Brief tummy time tolerated (start with 1-2 min)\n    - Weight should be approaching or at birth weight\n    - Feeding patterns more predictable\n\n    {{ ctx.output_format }}\n  \"#\n}\n\n",
  "milestones/stages/third-week.baml": "// Stage-specific milestone generation for Days 15-21 (Third Week)\n// Focus: Early social smiles, improved tracking, longer alert periods\n\nfunction ThirdWeekMilestone(input: MilestoneInput) -> MilestoneEnhancementOutput {\n  client CustomGPT4oMini\n  prompt #\"\n    {{_.role(\"system\")}}\n    Pediatric development educator for babies 15-21 days old (Third Week).\n    Focus: First social smiles, tracks moving objects, recognizes caregiver, occasional coos.\n\n    {{_.role(\"user\")}}\n    Generate milestone for {{input.babyName}} (Day {{input.ageInDays}}, Week {{input.ageInWeeks}}): \"{{input.plannedItem.title}}\"\n\n    Type: {{input.plannedItem.type}} | Relevance: {{input.plannedItem.relevance}}\n    {% if input.achievedMilestones %}Achieved: {{input.achievedMilestones}}{% endif %}\n    {% if input.hasTummyTimeActivity %}Tummy time: Active{% endif %}\n\n    Provide:\n    1. subtitle (max 5 words, catchy and memorable)\n    2. summary (max 20 words)\n    3. bulletPoints (2-3, max 12 words each)\n    4. followUpQuestion (max 15 words, use {{input.babyName}}'s name)\n\n    YES/NO: Prefer isYesNoQuestion: true, set openChatOnYes/openChatOnNo appropriately\n\n    THIRD WEEK FOCUS: Early social smile emerging, improved visual tracking, recognizes familiar faces/voices, brief coos.\n\n    {{ ctx.output_format }}\n  \"#\n}\n\n",
  "parent/daily-checkin-questions.baml": "// BAML function for daily parent check-in questions\n// Provides AI-powered personalized questions based on baby context and parent role\n\n// ============================================================================\n// Classes\n// ============================================================================\n\nenum ResponseType {\n  EMOJI_SCALE // 😢 😐 😊\n  YES_NO\n  RATING_1_5\n  TEXT_SHORT\n}\n\nclass CheckInQuestion {\n  question string @description(\"The check-in question to ask the parent\")\n  responseType ResponseType @description(\"Type of response expected\")\n  category string @description(\"Category: 'physical', 'emotional', 'support', 'baby_concern', or 'self_care'\")\n  priority string @description(\"Priority level: 'routine', 'important', or 'urgent'\")\n  followUpPrompt string? @description(\"Optional follow-up prompt if response indicates concern\")\n}\n\nclass DailyCheckInQuestionsOutput {\n  questions CheckInQuestion[] @description(\"3-5 personalized check-in questions for today\")\n}\n\n// ============================================================================\n// Functions\n// ============================================================================\n\nfunction DailyCheckInQuestions(\n  ppDay: int,\n  parentRole: string,\n  parentSleepHours: float?,\n  ageInDays: int,\n  ageInWeeks: int,\n  firstPregnancy: bool,\n  avgFeedingsPerDay: float?,\n  avgSleepHoursPerDay: float?,\n  avgDiaperChangesPerDay: float?\n) -> DailyCheckInQuestionsOutput {\n  client CustomGPT4oMini\n  prompt #\"\n    {{_.role(\"system\")}}\n    You are a compassionate postpartum care specialist creating personalized daily check-in questions for parents.\n\n    Your goal is to:\n    - Monitor physical and emotional well-being\n    - Identify potential concerns early (postpartum depression, anxiety, physical complications)\n    - Provide appropriate support based on their role and situation\n    - Make questions feel supportive, not clinical\n    - Keep questions brief and easy to answer\n\n    Guidelines:\n    - For moms in first 2 weeks: Focus on physical recovery, bleeding, pain, breastfeeding challenges\n    - For moms weeks 3-6: Balance physical recovery with emotional well-being\n    - For partners: Focus on their well-being, support capacity, bonding, and partnership\n    - For all: Monitor sleep deprivation, overwhelming feelings, support systems\n    - Vary between physical, emotional, and practical concerns\n    - Reference the baby's age and specific milestones when relevant\n\n    Red flags to watch for:\n    - Thoughts of harming self or baby\n    - Severe mood swings\n    - Inability to sleep even when baby sleeps\n    - Excessive crying or inability to stop crying\n    - Severe physical pain (beyond normal recovery)\n    - Isolation or withdrawal\n\n    {{_.role(\"user\")}}\n    Create 3-5 personalized check-in questions for today.\n\n    Parent Context:\n    - Role: {{parentRole}}\n    - Days postpartum: {{ppDay}}\n    - Baby age: {{ageInDays}} days ({{ageInWeeks}} weeks)\n    {% if firstPregnancy %}- First-time parent{% endif %}\n    {% if parentSleepHours %}- Parent sleep last 24h: {{parentSleepHours}}h{% endif %}\n\n    {% if avgFeedingsPerDay or avgSleepHoursPerDay or avgDiaperChangesPerDay %}\n    Baby's patterns:\n    {% if avgFeedingsPerDay %}- Avg feedings/day: {{avgFeedingsPerDay}}{% endif %}\n    {% if avgSleepHoursPerDay %}- Avg sleep/day: {{avgSleepHoursPerDay}}h{% endif %}\n    {% if avgDiaperChangesPerDay %}- Avg diapers/day: {{avgDiaperChangesPerDay}}{% endif %}\n    {% endif %}\n\n    For each question:\n    - question: Clear, empathetic question (keep it conversational)\n    - responseType: Choose EMOJI_SCALE for mood/feelings, YES_NO for binary, RATING_1_5 for intensity, TEXT_SHORT for open-ended\n    - category: 'physical', 'emotional', 'support', 'baby_concern', or 'self_care'\n    - priority: 'routine' for normal check-ins, 'important' for things to monitor closely, 'urgent' for red flags\n    - followUpPrompt: Only include if the question might reveal a concern that needs follow-up\n\n    Make questions:\n    - Specific to their postpartum day and role\n    - Easy to answer quickly (busy parents!)\n    - Progressive (harder/more personal questions after building rapport)\n    - Culturally sensitive and non-judgmental\n    - Focused on one thing at a time\n\n    {{ ctx.output_format }}\n  \"#\n}\n\n// ============================================================================\n// Tests\n// ============================================================================\n\ntest daily_checkin_mom_day_3 {\n  functions [DailyCheckInQuestions]\n  args {\n    ppDay 3\n    parentRole \"primary\"\n    parentSleepHours 4.5\n    ageInDays 3\n    ageInWeeks 0\n    firstPregnancy true\n    avgFeedingsPerDay 10.0\n    avgSleepHoursPerDay 15.0\n    avgDiaperChangesPerDay 8.0\n  }\n}\n\ntest daily_checkin_partner_week_2 {\n  functions [DailyCheckInQuestions]\n  args {\n    ppDay 14\n    parentRole \"partner\"\n    parentSleepHours 6.0\n    ageInDays 14\n    ageInWeeks 2\n    firstPregnancy true\n    avgFeedingsPerDay 9.0\n    avgSleepHoursPerDay 14.0\n    avgDiaperChangesPerDay 7.0\n  }\n}\n\n",
  "parent/personalized-tasks.baml": "// BAML function for personalized parent task suggestions\n// Provides AI-powered daily task lists based on role, time of day, and baby's age\n\n// ============================================================================\n// Classes\n// ============================================================================\n\nclass ParentTask {\n  taskText string @description(\"Clear, actionable task description\")\n  category string @description(\"Category: 'baby_care', 'household', 'self_care', 'relationship', or 'preparation'\")\n  priority string @description(\"Priority: 'high', 'medium', or 'low'\")\n  suggestedTime string @description(\"Suggested time: 'morning', 'afternoon', 'evening', 'anytime'\")\n  estimatedMinutes int @description(\"Estimated time to complete in minutes\")\n  whyItMatters string @description(\"Brief explanation of why this task is important now\")\n}\n\nclass PersonalizedTasksOutput {\n  tasks ParentTask[] @description(\"5-8 personalized tasks for today\")\n  motivationalMessage string @description(\"Brief, encouraging message to start the day\")\n}\n\n// ============================================================================\n// Functions\n// ============================================================================\n\nfunction PersonalizedTasks(\n  babyAgeInDays: int,\n  ppWeek: int,\n  timeOfDay: string,\n  feedingMethod: string\n) -> PersonalizedTasksOutput {\n  client CustomGPT4oMini\n  prompt #\"\n    {{_.role(\"system\")}}\n    You are a supportive parenting coach creating personalized daily task suggestions.\n\n    Your role is to:\n    - Suggest realistic, achievable tasks for busy new parents\n    - Balance baby care, household, self-care, and relationship maintenance\n    - Adapt suggestions to baby's developmental stage\n    - Provide context on WHY tasks matter (builds motivation)\n    - Be encouraging and realistic (not overwhelming!)\n\n    Task Guidelines:\n    - Keep tasks specific and actionable\n    - Consider time of day and energy levels\n    - Mix quick wins (5-10 min) with longer tasks\n    - Include at least one self-care item\n    - Adapt to feeding method (breastfeeding vs bottle feeding logistics)\n    - Reference baby's age when relevant\n\n    Priority Guidelines:\n    - HIGH: Safety, urgent medical needs, critical self-care (when exhausted)\n    - MEDIUM: Routine care, household maintenance, relationship check-ins\n    - LOW: Nice-to-haves, preparation for future stages\n\n    Time-of-Day Adaptation:\n    - MORNING: Energetic tasks, meal prep, planning, outdoor activities\n    - AFTERNOON: Flexible tasks that can be done during naps, one-handed tasks\n    - EVENING: Wind-down activities, partner connection, next-day prep\n    - ANYTIME: Can be done whenever convenient\n\n    {{_.role(\"user\")}}\n    Create 5-8 personalized tasks for a parent.\n\n    Context:\n    - Baby age: {{babyAgeInDays}} days old\n    - Postpartum week: {{ppWeek}}\n    - Time of day: {{timeOfDay}}\n    - Feeding method: {{feedingMethod}}\n\n    {% if babyAgeInDays <= 7 %}\n    NOTE: Very early postpartum. Keep tasks minimal and focused on recovery + survival.\n    {% elif babyAgeInDays <= 14 %}\n    NOTE: Still early postpartum. Balance recovery with establishing routines.\n    {% elif babyAgeInDays <= 42 %}\n    NOTE: Mid-postpartum. Can handle more tasks but still need rest and support.\n    {% else %}\n    NOTE: Later postpartum. Can include more planning and preparation tasks.\n    {% endif %}\n\n    {% if feedingMethod == \"breastfeeding\" %}\n    Consider: Nursing-friendly tasks, one-handed activities, hydration reminders\n    {% elif feedingMethod == \"bottle\" %}\n    Consider: Bottle prep/cleaning, formula organization, feeding schedule coordination\n    {% else %}\n    Consider: Mixed feeding logistics, both nursing and bottle needs\n    {% endif %}\n\n    For each task:\n    - taskText: Specific, clear action (e.g., \"Put together a snack basket for the living room\" not \"Get food\")\n    - category: What type of task it is\n    - priority: How important/urgent\n    - suggestedTime: Best time of day for this task\n    - estimatedMinutes: Realistic time estimate\n    - whyItMatters: Brief reason why this helps (builds motivation and understanding)\n\n    Also provide:\n    - motivationalMessage: An encouraging 1-2 sentence message for the parent\n\n    Make tasks:\n    - Realistic for sleep-deprived parents\n    - Varied in duration and difficulty\n    - Supportive, not demanding\n    - Helpful reminders they might forget\n\n    {{ ctx.output_format }}\n  \"#\n}\n\n// ============================================================================\n// Tests\n// ============================================================================\n\ntest personalized_tasks_morning_newborn {\n  functions [PersonalizedTasks]\n  args {\n    babyAgeInDays 5\n    ppWeek 1\n    timeOfDay \"morning\"\n    feedingMethod \"breastfeeding\"\n  }\n}\n\ntest personalized_tasks_evening_month_old {\n  functions [PersonalizedTasks]\n  args {\n    babyAgeInDays 30\n    ppWeek 4\n    timeOfDay \"evening\"\n    feedingMethod \"mixed\"\n  }\n}\n\n",
  "parent/role-specific-tips.baml": "// BAML function for role-specific parent tips\n// Provides AI-powered tips tailored to parent role (mom, partner, caregiver)\n\n// ============================================================================\n// Classes\n// ============================================================================\n\nclass ParentTip {\n  title string @description(\"Catchy 4-6 word title\")\n  content string @description(\"2-3 sentences with practical advice\")\n  actionItems string[] @description(\"1-3 specific action items\")\n  relevantToRole string @description(\"Why this tip matters for this specific role\")\n}\n\nclass RoleSpecificTipsOutput {\n  tips ParentTip[] @description(\"3-5 role-specific tips\")\n}\n\n// ============================================================================\n// Functions\n// ============================================================================\n\nfunction RoleSpecificTips(\n  parentRole: string,\n  ppDay: int?,\n  babyAgeInDays: int,\n  babyName: string?,\n  babySex: string?,\n  topic: string,\n  recentSleepHours: float?,\n  concerns: string[]?,\n  // Rich context from database\n  recentChatTopics: string?,\n  achievedMilestones: string?,\n  activitySummary: string?,\n  parentWellness: string?,\n  medicalContext: string?\n) -> RoleSpecificTipsOutput {\n  client CustomGPT4oMini\n  prompt #\"\n    {{_.role(\"system\")}}\n    You are a specialized parenting coach providing role-specific support and guidance grounded in evidence-based research.\n\n    Your expertise includes:\n    - Postpartum recovery for birthing parents\n    - Partner support strategies\n    - Sleep deprivation coping\n    - Mental health awareness\n    - Bonding and attachment\n    - Relationship maintenance during postpartum\n    - Practical household management\n\n    Role Differences:\n\n    PRIMARY CAREGIVER (usually mom):\n    - Physical recovery from birth\n    - Breastfeeding challenges and support\n    - Hormonal changes and mood\n    - Primary bonding and constant care\n    - Need for support and breaks\n    - Identity adjustment\n\n    PARTNER:\n    - Supporting the primary caregiver\n    - Finding their role and bonding\n    - Feeling left out or uncertain\n    - Managing household and logistics\n    - Their own mental health\n    - Maintaining relationship\n\n    CAREGIVER (grandparent, nanny, etc.):\n    - Supporting parents' approach\n    - Respecting boundaries\n    - Providing practical help\n    - Not overstepping\n    - Updated baby care info\n\n    {{_.role(\"user\")}}\n    Create 3-5 tips for this parent.\n\n    Context:\n    - Role: {{parentRole}}\n    {% if ppDay %}- Postpartum day: {{ppDay}}{% endif %}\n    - Baby age: {{babyAgeInDays}} days\n    {% if babyName %}- Baby: {{babyName}}{% endif %}\n    {% if babySex %}Sex: {{babySex}}\n    CRITICAL: Use grammatically correct pronouns when referencing the baby:\n    {% if babySex == \"M\" or babySex == \"male\" %}\n    - Use: he, him, his (e.g., \"When he cries\", \"Comfort him\", \"His needs\")\n    {% elif babySex == \"F\" or babySex == \"female\" %}\n    - Use: she, her, hers (e.g., \"When she cries\", \"Comfort her\", \"Her needs\")\n    {% else %}\n    - Use: they, them, their (e.g., \"When they cry\", \"Comfort them\", \"Their needs\")\n    {% endif %}\n    {% else %}\n    - Use gender-neutral: they, them, their when sex is unknown\n    {% endif %}\n    - Topic focus: {{topic}}\n    {% if recentSleepHours %}- Recent sleep: {{recentSleepHours}}h{% endif %}\n    {% if concerns and concerns|length > 0 %}- Recent concerns: {{concerns|join(\", \")}}{% endif %}\n\n    {% if recentChatTopics %}\n    ═══════════════════════════════════════════════════════════════\n    RECENT DISCUSSION CONTEXT\n    ═══════════════════════════════════════════════════════════════\n    {{recentChatTopics}}\n    {% endif %}\n\n    {% if achievedMilestones %}\n    ═══════════════════════════════════════════════════════════════\n    RECENTLY ACHIEVED MILESTONES\n    ═══════════════════════════════════════════════════════════════\n    {{achievedMilestones}}\n    {% endif %}\n\n    {% if activitySummary %}\n    ═══════════════════════════════════════════════════════════════\n    DETAILED ACTIVITY SUMMARY (LAST 3 DAYS)\n    ═══════════════════════════════════════════════════════════════\n    {{activitySummary}}\n    {% endif %}\n\n    {% if parentWellness %}\n    ═══════════════════════════════════════════════════════════════\n    PARENT WELLNESS CONTEXT\n    ═══════════════════════════════════════════════════════════════\n    {{parentWellness}}\n    {% endif %}\n\n    {% if medicalContext %}\n    ═══════════════════════════════════════════════════════════════\n    MEDICAL CONTEXT\n    ═══════════════════════════════════════════════════════════════\n    {{medicalContext}}\n    {% endif %}\n\n    Topic Guidance:\n    {% if topic == \"sleep_deprivation\" %}\n    Focus on: Coping strategies, sleep optimization, when to ask for help, safety while exhausted\n    {% elif topic == \"postpartum_recovery\" %}\n    Focus on: Physical healing, warning signs, self-care, managing expectations, when to call doctor\n    {% elif topic == \"partner_support\" %}\n    Focus on: How to help effectively, bonding with baby, supporting birthing parent, maintaining connection\n    {% elif topic == \"mental_health_support\" %}\n    Focus on: Recognizing warning signs, coping strategies, when to seek help, reducing stigma\n    {% elif topic == \"feeding_support\" %}\n    Focus on: Common challenges, when to seek help, supporting parent's choice, practical tips\n    {% else %}\n    Focus on: Practical, actionable advice relevant to their role and baby's age\n    {% endif %}\n\n    For each tip:\n    - title: Clear, engaging title\n    - content: 2-3 sentences explaining the tip\n    - actionItems: 1-3 specific things they can do NOW\n    - relevantToRole: One sentence on why this matters for THEIR specific role\n\n    Make tips:\n    - Evidence-based when possible - reference research findings\n    - Cite AAP, WHO, or ACOG guidelines for medical/health advice\n    - Distinguish between \"research shows\" and \"many parents find\"\n    - Acknowledge where evidence is limited\n    - Include phrases like \"Studies suggest\", \"Research indicates\", \"AAP recommends\"\n    - Specific to their role's unique needs and challenges\n    - Actionable and practical (not just \"be positive\")\n    - Empathetic and non-judgmental\n    - Acknowledge the difficulty of their situation\n    - Empower them with knowledge and choices\n\n    {{ ctx.output_format }}\n  \"#\n}\n\n// ============================================================================\n// Tests\n// ============================================================================\n\ntest role_tips_mom_postpartum_recovery {\n  functions [RoleSpecificTips]\n  args {\n    parentRole \"primary\"\n    ppDay 7\n    babyAgeInDays 7\n    topic \"postpartum_recovery\"\n    recentSleepHours 5.5\n  }\n}\n\ntest role_tips_partner_support {\n  functions [RoleSpecificTips]\n  args {\n    parentRole \"partner\"\n    ppDay 14\n    babyAgeInDays 14\n    topic \"partner_support\"\n    recentSleepHours 6.0\n  }\n}\n\ntest role_tips_sleep_deprivation {\n  functions [RoleSpecificTips]\n  args {\n    parentRole \"primary\"\n    ppDay 21\n    babyAgeInDays 21\n    topic \"sleep_deprivation\"\n    recentSleepHours 3.5\n    concerns [\"exhausted\", \"overwhelmed\"]\n  }\n}\n\n",
  "parent/wellness-screening.baml": "// BAML function for parent wellness screening assessments\n// Provides AI-powered adaptive mental health screening based on postpartum stage\n\n// ============================================================================\n// Classes\n// ============================================================================\n\nclass WellnessQuestion {\n  question string @description(\"The wellness screening question\")\n  responseType string @description(\"RATING_0_3 for EPDS-style questions, YES_NO for binary screening\")\n  category string @description(\"Category: 'mood', 'anxiety', 'bonding', 'coping', or 'thoughts'\")\n  weight int @description(\"Scoring weight (0-3 for standard EPDS, 0-4 for anxiety items)\")\n  reverseScore bool @description(\"True if higher score is better (for positive items)\")\n}\n\nclass WellnessScreeningOutput {\n  questions WellnessQuestion[] @description(\"7-10 screening questions adapted to current situation\")\n  scoringGuidance string @description(\"Brief guidance on score interpretation\")\n  supportResources string[] @description(\"3-5 relevant support resources based on postpartum stage\")\n}\n\n// ============================================================================\n// Functions\n// ============================================================================\n\nfunction WellnessScreening(\n  ppDay: int,\n  ppWeek: int?,\n  firstPregnancy: bool,\n  babyFirstName: string,\n  ageInDays: int,\n  previousCheckIns: string // JSON array of previous check-in history\n) -> WellnessScreeningOutput {\n  client CustomGPT4oMini\n  prompt #\"\n    {{_.role(\"system\")}}\n    You are a perinatal mental health specialist creating adaptive wellness screenings for postpartum parents.\n\n    Your screening should be based on validated tools like:\n    - Edinburgh Postnatal Depression Scale (EPDS)\n    - Generalized Anxiety Disorder-7 (GAD-7)\n    - Patient Health Questionnaire-9 (PHQ-9)\n\n    But ADAPT the questions to:\n    - The specific postpartum day/week\n    - The baby's name and age\n    - Previous check-in patterns\n    - First-time vs experienced parent\n    - Cultural sensitivity\n\n    Critical Days/Weeks:\n    - Day 3-5: Baby blues peak (expected mood swings)\n    - Week 2: Watch for postpartum depression onset\n    - Week 6: Common time for first postpartum visit\n    - Week 12: Extended screening for persistent symptoms\n\n    Scoring guidance:\n    - EPDS: 0-9 low risk, 10-12 moderate, 13+ likely depression\n    - Question 10 (self-harm): Any score >0 is urgent\n    - GAD items: 0-4 minimal, 5-9 mild, 10-14 moderate, 15+ severe\n\n    Key differences in adaptation:\n    - Day 3: Normalize baby blues, screen for extreme symptoms\n    - Week 1-2: Standard EPDS appropriate\n    - Week 4+: Add anxiety screening, bonding questions\n    - Triggered (after concerning check-in): Focus on specific concerns raised\n\n    {{_.role(\"user\")}}\n    Create a wellness screening for this parent.\n\n    Context:\n    - Postpartum day: {{ppDay}}{% if ppWeek %} (week {{ppWeek}}){% endif %}\n    - Baby: {{babyFirstName}}, {{ageInDays}} days old\n    {% if firstPregnancy %}- First-time parent{% endif %}\n    - Previous check-ins: {{previousCheckIns}}\n\n    {% if ppDay <= 5 %}\n    NOTE: This is during the \"baby blues\" period. Mood swings are NORMAL. Focus on extreme or persistent symptoms.\n    {% elif ppDay >= 84 %}\n    NOTE: Extended postpartum period. Screen for persistent or late-onset postpartum depression.\n    {% endif %}\n\n    Create 7-10 questions that:\n    - Cover mood, anxiety, bonding, and coping\n    - Use {{babyFirstName}}'s name in questions when natural\n    - Adapt phrasing to postpartum day (e.g., \"in the past week\" vs \"in the past day\")\n    - Include at least one question about thoughts of self-harm\n    - Progress from general to more sensitive topics\n\n    For each question:\n    - question: Clear, compassionate question using validated scale language\n    - responseType: \"RATING_0_3\" (never/rarely/sometimes/often) or \"YES_NO\" for screening flags\n    - category: The aspect being assessed\n    - weight: Scoring weight (typically 0-3 for EPDS items)\n    - reverseScore: True for positive items (e.g., \"I have looked forward with enjoyment\")\n\n    Also provide:\n    - scoringGuidance: Brief explanation of what scores mean\n    - supportResources: 3-5 specific resources relevant to this postpartum stage\n\n    {{ ctx.output_format }}\n  \"#\n}\n\n// ============================================================================\n// Tests\n// ============================================================================\n\ntest wellness_screening_day_3 {\n  functions [WellnessScreening]\n  args {\n    ppDay 3\n    firstPregnancy true\n    babyFirstName \"Riley\"\n    ageInDays 3\n    previousCheckIns \"[]\"\n  }\n}\n\ntest wellness_screening_week_6 {\n  functions [WellnessScreening]\n  args {\n    ppDay 42\n    ppWeek 6\n    firstPregnancy true\n    babyFirstName \"Riley\"\n    ageInDays 42\n    previousCheckIns \"[{\\\"date\\\": \\\"2024-01-15\\\", \\\"moodScore\\\": 3, \\\"concernsRaised\\\": [\\\"tired\\\"]}]\"\n  }\n}\n\n",
  "postpartum/postpartum-tips.baml": "// BAML function for postpartum care tips\n// Provides AI-powered postpartum guidance for new parents\n\n// ============================================================================\n// Classes\n// ============================================================================\n\nclass PostpartumTipsInput {\n  babyName string\n  babySex string?\n  day int\n  firstPregnancy bool\n  ageInDays int\n  ageInWeeks int\n  currentWeightOz int?\n  birthWeightOz int?\n  height int?\n  headCircumference int?\n  feedingCount24h int?\n  avgFeedingInterval float?\n  sleepCount24h int?\n  totalSleepHours24h float?\n  diaperCount24h int?\n  avgFeedingsPerDay float?\n  avgSleepHoursPerDay float?\n  avgDiaperChangesPerDay float?\n  // Rich context from database\n  recentChatTopics string?\n  achievedMilestones string?\n  activitySummary string?\n  parentWellness string?\n  medicalContext string?\n}\n\nclass PostpartumTipsOutput {\n  tips LearningTip[] @description(\"Array of 3-5 personalized tips for this postpartum day, tailored to the baby's specific context\")\n}\n\n// ============================================================================\n// Functions\n// ============================================================================\n\nfunction PostpartumTips(input: PostpartumTipsInput) -> PostpartumTipsOutput {\n  client CustomGPT4oMini\n  prompt #\"\n    {{_.role(\"system\")}}\n    You are a supportive postpartum care advisor with expertise in evidence-based postpartum practices from AAP, ACOG, and WHO guidelines, helping new parents navigate their first days with a newborn.\n\n    IMPORTANT CONTEXT - About the Nugget App:\n    The parents are using Nugget, a comprehensive parenting app that already provides:\n\n    TRACKING CAPABILITIES (already built-in):\n    - Feeding logs (breastfeeding, bottle, pumping, solid foods) with amounts and duration\n    - Sleep tracking with start/end times and patterns\n    - Diaper changes (wet, dirty, or both) with timestamps\n    - Growth measurements (weight, height, head circumference)\n    - Medicine and temperature tracking\n    - Tummy time, bath time, and other activities\n    - Automatic pattern recognition and insights\n\n    ANALYSIS & INSIGHTS (already available):\n    - Visual charts and reports showing trends over time\n    - Predictive cards suggesting when next feeding/sleep/diaper is likely\n    - Weekly and daily pattern summaries\n    - Growth charts compared to WHO standards\n    - Feed calculator for portion guidance\n\n    LEARNING & SUPPORT (already included):\n    - AI Chat assistant for personalized questions (this conversation)\n    - Learning Hub with evidence-based articles\n    - Partner Support guides\n    - Postpartum Care resources\n    - Nutrition guides for baby and mother\n    - Milestone tracking with photos and memories\n    - Caregiver Guide for sharing with family\n\n    MEDICAL & PLANNING:\n    - Medical Records storage\n    - Healthcare Provider contact information\n    - Budget & Finance planning tools\n    - Family Calendar for appointments\n\n    Your role is to:\n    ✓ Help parents UNDERSTAND their baby's patterns and development\n    ✓ EDUCATE about what's normal and what to watch for\n    ✓ EXPLAIN the \"why\" behind recommendations\n    ✓ Build CONFIDENCE in their parenting instincts\n\n    Do NOT suggest the app do things it already does (like \"Would you like a feeding tracker?\")\n    DO focus on helping them interpret their data, understand developmental stages, and make informed decisions.\n\n    When providing tips:\n    - Reference research when available (e.g., \"Research shows that...\", \"Studies indicate...\")\n    - Cite AAP, WHO, or ACOG guidelines for medical/health advice (e.g., \"AAP recommends...\", \"WHO guidelines suggest...\")\n    - Distinguish between evidence-based practices and common practices\n    - Note where evidence is limited or conflicting\n    - Use phrases like \"Research suggests\", \"Studies indicate\", \"AAP recommends\", \"WHO guidelines\"\n    - Prioritize information from authoritative sources:\n      * American Academy of Pediatrics (AAP) clinical guidelines\n      * World Health Organization (WHO) recommendations\n      * American College of Obstetricians and Gynecologists (ACOG)\n      * Peer-reviewed research on postpartum care and infant development\n\n    {{_.role(\"user\")}}\n    Provide 3-5 helpful, personalized tips for day {{input.day}} postpartum.\n    {% if input.firstPregnancy %}This is a first-time parent.{% endif %}\n\n    Baby: {{input.babyName}}\n    {% if input.babySex %}Sex: {{input.babySex}}\n    CRITICAL: Use grammatically correct pronouns throughout ALL generated content:\n    {% if input.babySex == \"M\" or input.babySex == \"male\" %}\n    - Use: he, him, his (e.g., \"Watch how he responds\", \"Give him tummy time\", \"His reflexes\")\n    {% elif input.babySex == \"F\" or input.babySex == \"female\" %}\n    - Use: she, her, hers (e.g., \"Watch how she responds\", \"Give her tummy time\", \"Her reflexes\")\n    {% else %}\n    - Use: they, them, their (e.g., \"Watch how they respond\", \"Give them tummy time\", \"Their reflexes\")\n    {% endif %}\n    {% else %}\n    - Use gender-neutral: they, them, their when sex is unknown\n    {% endif %}\n\n    Baby Context:\n    - Age: {{input.ageInDays}} days ({{input.ageInWeeks}} weeks)\n    {% if input.currentWeightOz and input.birthWeightOz %}- Weight: {{input.currentWeightOz}}oz (birth: {{input.birthWeightOz}}oz, {% if input.currentWeightOz > input.birthWeightOz %}gained {{input.currentWeightOz - input.birthWeightOz}}oz{% else %}change {{input.currentWeightOz - input.birthWeightOz}}oz{% endif %}){% endif %}\n    {% if input.height %}- Height: {{input.height}}cm{% endif %}\n    {% if input.headCircumference %}- Head circumference: {{input.headCircumference}}cm{% endif %}\n\n    {% if input.feedingCount24h or input.sleepCount24h or input.diaperCount24h %}\n    Recent Activity (Last 24 hours):\n    {% if input.feedingCount24h %}- Feedings: {{input.feedingCount24h}}{% if input.avgFeedingInterval %} (avg {{input.avgFeedingInterval}}h intervals){% endif %}{% endif %}\n    {% if input.sleepCount24h %}- Sleep: {{input.sleepCount24h}} sessions{% if input.totalSleepHours24h %} ({{input.totalSleepHours24h}}h total){% endif %}{% endif %}\n    {% if input.diaperCount24h %}- Diapers: {{input.diaperCount24h}} changes{% endif %}\n    {% endif %}\n\n    {% if input.avgFeedingsPerDay or input.avgSleepHoursPerDay or input.avgDiaperChangesPerDay %}\n    Weekly Patterns:\n    {% if input.avgFeedingsPerDay %}- Avg feedings/day: {{input.avgFeedingsPerDay}}{% endif %}\n    {% if input.avgSleepHoursPerDay %}- Avg sleep/day: {{input.avgSleepHoursPerDay}}h{% endif %}\n    {% if input.avgDiaperChangesPerDay %}- Avg diapers/day: {{input.avgDiaperChangesPerDay}}{% endif %}\n    {% endif %}\n\n    {% if input.recentChatTopics %}\n    ═══════════════════════════════════════════════════════════════\n    RECENT DISCUSSION CONTEXT\n    ═══════════════════════════════════════════════════════════════\n    {{input.recentChatTopics}}\n    {% endif %}\n\n    {% if input.achievedMilestones %}\n    ═══════════════════════════════════════════════════════════════\n    RECENTLY ACHIEVED MILESTONES\n    ═══════════════════════════════════════════════════════════════\n    {{input.achievedMilestones}}\n    {% endif %}\n\n    {% if input.activitySummary %}\n    ═══════════════════════════════════════════════════════════════\n    DETAILED ACTIVITY SUMMARY (LAST 3 DAYS)\n    ═══════════════════════════════════════════════════════════════\n    {{input.activitySummary}}\n    {% endif %}\n\n    {% if input.parentWellness %}\n    ═══════════════════════════════════════════════════════════════\n    PARENT WELLNESS CONTEXT\n    ═══════════════════════════════════════════════════════════════\n    {{input.parentWellness}}\n    {% endif %}\n\n    {% if input.medicalContext %}\n    ═══════════════════════════════════════════════════════════════\n    MEDICAL CONTEXT\n    ═══════════════════════════════════════════════════════════════\n    {{input.medicalContext}}\n    {% endif %}\n\n    Focus on:\n    - Day 0-3: Basics (feeding, diaper changes, sleep, when to call doctor)\n    - Day 4-7: Normal newborn behaviors, self-care for parents\n    - Day 8-14: Establishing routines, milestone awareness\n\n    For each tip, provide:\n    - category: Choose one of: 'feeding', 'sleep', 'diaper', 'development', 'health', or 'postpartum'\n    - subtitle: A catchy 4-5 word subtitle (max 5 words)\n    - summary: One concise sentence (max 12 words)\n    - bulletPoints: 2-3 actionable bullet points (each bullet max 15 words)\n    - followUpQuestion: ONE focused question\n\n    CRITICAL YES/NO QUESTION REQUIREMENTS:\n\n    * MANDATORY: At least TWO tips MUST have isYesNoQuestion: true\n    * DEFAULT RULE: For health/safety concerns, ALWAYS use isYesNoQuestion: true\n    * PRIORITY: Days 0-7 should have MORE yes/no questions for urgent health checks\n\n    * YES/NO QUESTIONS (isYesNoQuestion: true) - REQUIRED for health/safety:\n      Examples:\n      - \"Has {{input.babyName}} had a wet diaper in the last 12 hours?\"\n      - \"Is {{input.babyName}} showing signs of jaundice?\"\n      - \"Are you experiencing heavy bleeding?\"\n      - \"Has {{input.babyName}} had a bowel movement today?\"\n      - \"Is {{input.babyName}} latching well during feedings?\"\n\n    * When isYesNoQuestion: true, you MUST set openChatOnNo and/or openChatOnYes:\n      - openChatOnNo: true → If \"no\" is urgent (no wet diapers, not eating)\n      - openChatOnYes: true → If \"yes\" is urgent (heavy bleeding, jaundice)\n      - ALWAYS provide the corresponding prompt\n\n    * OPEN-ENDED QUESTIONS (isYesNoQuestion: false) - Use for qualitative info:\n      - \"What color is {{input.babyName}}'s poop today?\"\n      - \"How does {{input.babyName}} act during feedings?\"\n\n    DECISION TREE FOR EACH TIP:\n    1. Is this a health/safety concern? → isYesNoQuestion: true\n    2. Can this be answered yes/no? → isYesNoQuestion: true\n    3. Does it need qualitative details? → isYesNoQuestion: false\n    4. For 'health', 'diaper', 'postpartum' categories → PREFER isYesNoQuestion: true\n\n    Make each tip:\n    - Specific to {{input.babyName}}'s current age and situation\n    - Reference their actual tracked data when relevant (e.g., \"You've logged 8 feedings\")\n    - Use {{input.babyName}}'s name naturally in the content when appropriate\n    - Educational and confidence-building, not just directive\n    - Help parents interpret what they're seeing in the app\n    - Varied in category to cover different aspects of care\n\n    {{ ctx.output_format }}\n  \"#\n}\n\n// ============================================================================\n// Tests\n// ============================================================================\n\ntest postpartum_tips_day_3 {\n  functions [PostpartumTips]\n  args {\n    input {\n      babyName \"Riley\"\n      day 3\n      firstPregnancy true\n      ageInDays 3\n      ageInWeeks 0\n      currentWeightOz 120\n      birthWeightOz 115\n      feedingCount24h 10\n      avgFeedingInterval 2.5\n      sleepCount24h 8\n      totalSleepHours24h 14.5\n      diaperCount24h 8\n      avgFeedingsPerDay 10.0\n      avgSleepHoursPerDay 15.0\n      avgDiaperChangesPerDay 8.0\n    }\n  }\n}\n\n",
  "pregnancy/birth-plan-headline.baml": "// BAML function for birth plan headlines\n// Provides AI-powered birth plan preparation guidance\n\n// ============================================================================\n// Classes\n// ============================================================================\n\nclass BirthPlanHeadlineOutput {\n  text string @description(\"Encouraging headline about birth plan preparation, tailored to delivery mode.\")\n}\n\n// ============================================================================\n// Functions\n// ============================================================================\n\nfunction BirthPlanHeadline(\n  mode: string\n) -> BirthPlanHeadlineOutput {\n  client CustomGPT4oMini\n  prompt #\"\n    {{_.role(\"system\")}}\n    You are a birth planning advisor providing personalized guidance.\n\n    {{_.role(\"user\")}}\n    Create an encouraging headline about birth plan preparation.\n    Delivery mode: {{mode}} (either \"csection\" or \"vaginal\")\n\n    Make it specific to the delivery mode, positive, and actionable.\n\n    {{ ctx.output_format }}\n  \"#\n}\n\n// ============================================================================\n// Tests\n// ============================================================================\n\ntest birth_plan_headline_csection {\n  functions [BirthPlanHeadline]\n  args {\n    mode \"csection\"\n  }\n}\n\ntest birth_plan_headline_vaginal {\n  functions [BirthPlanHeadline]\n  args {\n    mode \"vaginal\"\n  }\n}\n\n",
  "pregnancy/hospital-pack-advice.baml": "// BAML function for hospital bag packing advice\n// Provides AI-powered guidance for preparing hospital bags\n\n// ============================================================================\n// Classes\n// ============================================================================\n\nclass HospitalPackAdviceOutput {\n  headline string @description(\"Short, motivating headline about hospital bag packing progress.\")\n  subtext string @description(\"Brief helpful tip about what to pack or prepare next (1-2 sentences).\")\n}\n\n// ============================================================================\n// Functions\n// ============================================================================\n\nfunction HospitalPackAdvice(\n  progress: int\n) -> HospitalPackAdviceOutput {\n  client CustomGPT4oMini\n  prompt #\"\n    {{_.role(\"system\")}}\n    You are a birth preparation expert helping parents pack their hospital bag.\n\n    {{_.role(\"user\")}}\n    Hospital bag packing is {{progress}}% complete.\n\n    Provide:\n    1. A short, motivating headline about their progress\n    2. A brief tip about what to pack next or prepare\n\n    Keep it practical and encouraging.\n\n    {{ ctx.output_format }}\n  \"#\n}\n\n// ============================================================================\n// Tests\n// ============================================================================\n\ntest hospital_pack_50_percent {\n  functions [HospitalPackAdvice]\n  args {\n    progress 50\n  }\n}\n\n",
  "pregnancy/pregnancy-week-summary.baml": "// BAML function for pregnancy week summaries\n// Provides AI-powered weekly pregnancy development updates\n\n// ============================================================================\n// Classes\n// ============================================================================\n\nclass PregnancyWeekSummaryOutput {\n  text string @description(\"Week-by-week pregnancy development summary. Include baby's size, development, and what mom might experience (3-4 sentences).\")\n}\n\n// ============================================================================\n// Functions\n// ============================================================================\n\nfunction PregnancyWeekSummary(\n  week: int\n) -> PregnancyWeekSummaryOutput {\n  client CustomGPT4oMini\n  prompt #\"\n    {{_.role(\"system\")}}\n    You are a prenatal development expert providing weekly pregnancy updates.\n\n    {{_.role(\"user\")}}\n    Provide a pregnancy summary for week {{week}}.\n\n    Include:\n    - Baby's approximate size (using a fun comparison like \"size of a lime\")\n    - Key developmental milestones this week\n    - What mom might be experiencing\n\n    Keep it engaging and informative (3-4 sentences).\n\n    {{ ctx.output_format }}\n  \"#\n}\n\n// ============================================================================\n// Tests\n// ============================================================================\n\ntest pregnancy_week_summary_week_20 {\n  functions [PregnancyWeekSummary]\n  args {\n    week 20\n  }\n}\n\n",
}
export const getBamlFiles = () => {
    return fileMap;
}